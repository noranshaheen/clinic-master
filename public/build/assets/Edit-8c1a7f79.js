import{J as y}from"./ActionMessage-c078ab58.js";import{J as j}from"./ActionSection-503f6cc4.js";import{J as A}from"./Button-caddf70d.js";import{J as U}from"./ConfirmationModal-747d8d1a.js";import{J as B}from"./DangerButton-0ca7bbd2.js";import{J as M}from"./DialogModal-08c723b0.js";import{J as T}from"./FormSection-f05163be.js";import{J as F}from"./Input-2cb00575.js";import{J as R}from"./Checkbox-0b804630.js";import{J as E}from"./InputError-1ce94fe9.js";import{J as N}from"./Label-715dcd10.js";import{J as q}from"./SecondaryButton-3445fa1d.js";import{J as I}from"./SectionBorder-30338fa4.js";import{J as L}from"./ValidationErrors-deb0d81a.js";import{M as O}from"./vue3-multiselect.umd.min-7dc826ba.js";import{T as x}from"./TextField-f2f734f3.js";import{k as _,c as z,w as c,r as p,o as n,f,t as m,b as t,a as s,i as b,C as w,d,g,F as v,n as W}from"./app-5577a803.js";import{_ as G}from"./_plugin-vue_export-helper-c27b6911.js";import"./SectionTitle-75c86d6b.js";import"./Modal-5b92d53d.js";/* empty css            */const H={components:{JetActionMessage:y,JetActionSection:j,JetButton:A,JetConfirmationModal:U,JetDangerButton:B,JetDialogModal:M,JetFormSection:T,JetInput:F,JetCheckbox:R,JetInputError:E,JetLabel:N,JetSecondaryButton:q,JetSectionBorder:I,JetValidationErrors:L,Multiselect:O,TextField:x},props:{appointment:{type:Object,default:null}},data(){return{errors:[],form:this.$inertia.form({doctor_id:"",records:[]}),allrooms:[],availableRooms:[],clinic_id:"",clinics:[],doctors:[],showDialog:!1}},methods:{ShowDialog(){this.appointment!=null&&(this.form.doctor_id=this.appointment.doctor_id,this.form.records.room_id=this.appointment.room_id,this.form.records.date=new Date(this.appointment.date).toISOString(),this.form.records.from=new Date(this.appointment.from).toLocaleTimeString(),this.form.records.to=new Date(this.appointment.to).toLocaleTimeString()),this.showDialog=!0},CancelDlg(){this.showDialog=!1},updateAvailableRooms(e){this.availableRooms=this.allrooms.filter(i=>i.clinic_id==e),console.log(e),console.log(this.availableRooms)},SaveNewAppointment(){_.post(route("appointments.store"),this.form).then(e=>{this.$store.dispatch("setSuccessFlashMessage",!0),this.processing=!1,this.form.reset(),this.form.processing=!1,this.showDialog=!1,setTimeout(()=>{window.location.reload()},500)}).catch(e=>{this.form.processing=!1,this.$page.props.errors=e.response.data.errors,this.errors=e.response.data.errors})},SaveAppointment(){_.put(route("appointments.store",{appointment:this.appointment.id}),this.form).then(e=>{this.$store.dispatch("setSuccessFlashMessage",!0),this.processing=!1,this.form.reset(),this.form.processing=!1,this.showDialog=!1,setTimeout(()=>{window.location.reload()},500)}).catch(e=>{this.form.processing=!1,this.$page.props.errors=e.response.data.errors,this.errors=e.response.data.errors})},submit(){this.appointment==null?this.SaveNewAppointment():this.SaveAppointment()},addBalance(){this.form.records.push({date:new Date().toISOString().slice(0,10),from:"",to:"",room_id:"",num_of_cases:0})},deleteEntry(e){this.form.records.splice(e,1)}},created(){this.addBalance(),_.get(route("doctor.all")).then(e=>{this.doctors=e.data}),_.get(route("clinic.all")).then(e=>{this.clinics=e.data}),_.get(route("room.all")).then(e=>{this.allrooms=e.data})}},K={class:"grid grid-cols-1"},P={class:"grid grid-cols-2 gap-3"},Q={class:"col-span-1"},X=["value"],Y={class:"col-span-1"},Z=["value"],$={class:"col-span-1"},ee={class:"col-span-1"},oe={class:"col-span-1"},te={class:"col-span-1"},se={class:"col-span-1"},le=["onUpdate:modelValue"],ae=["value"],ie={class:"col-span-1"},ne={class:"col-span-1 w-full"},re={class:"flex items-center justify-end"};function me(e,i,de,ce,l,u){const V=p("jet-validation-errors"),r=p("jet-label"),h=p("jet-input"),D=p("jet-danger-button"),J=p("jet-button"),C=p("jet-secondary-button"),S=p("jet-dialog-modal");return n(),z(S,{show:l.showDialog,maxWidth:"5xl",onClose:i[4]||(i[4]=o=>l.showDialog=!1)},{title:c(()=>[f(m(e.__("Add An Appointment Dialog")),1)]),content:c(()=>[t(V,{class:"mb-4"}),s("div",K,[s("div",P,[s("div",Q,[t(r,{value:e.__("Doctor")},null,8,["value"]),b(s("select",{"onUpdate:modelValue":i[0]||(i[0]=o=>l.form.doctor_id=o),class:"mt-1 block w-full border-slate-300 rounded-md"},[(n(!0),d(v,null,g(l.doctors,o=>(n(),d("option",{value:o.id,key:o.id},m(o.name),9,X))),128))],512),[[w,l.form.doctor_id]])]),s("div",Y,[t(r,{value:e.__("Clinic")},null,8,["value"]),b(s("select",{"onUpdate:modelValue":i[1]||(i[1]=o=>l.clinic_id=o),class:"mt-1 block w-full border-slate-300 rounded-md",onChange:i[2]||(i[2]=o=>u.updateAvailableRooms(l.clinic_id))},[(n(!0),d(v,null,g(l.clinics,o=>(n(),d("option",{value:o.id,key:o.id},m(o.name),9,Z))),128))],544),[[w,l.clinic_id]])]),(n(!0),d(v,null,g(l.form.records,(o,k)=>(n(),d("div",{key:k,class:"bg-gray-200 grid grid-cols-6 gap-3 col-span-2 py-2"},[s("div",$,[t(r,{value:e.__("Date"),class:"mt-4"},null,8,["value"]),t(h,{type:"date",class:"mt-1 block w-full text-sm",modelValue:o.date,"onUpdate:modelValue":a=>o.date=a,required:""},null,8,["modelValue","onUpdate:modelValue"])]),s("div",ee,[t(r,{value:e.__("From"),class:"mt-4"},null,8,["value"]),t(h,{type:"time",class:"mt-1 block w-full text-sm",modelValue:o.from,"onUpdate:modelValue":a=>o.from=a,required:""},null,8,["modelValue","onUpdate:modelValue"])]),s("div",oe,[t(r,{value:e.__("To"),class:"mt-4"},null,8,["value"]),t(h,{type:"time",class:"mt-1 block w-full text-sm",modelValue:o.to,"onUpdate:modelValue":a=>o.to=a,required:""},null,8,["modelValue","onUpdate:modelValue"])]),s("div",te,[t(r,{value:e.__("Number Of Cases"),class:"mt-4"},null,8,["value"]),t(h,{type:"number",class:"mt-1 block w-full text-sm",modelValue:o.num_of_cases,"onUpdate:modelValue":a=>o.num_of_cases=a,required:""},null,8,["modelValue","onUpdate:modelValue"])]),s("div",se,[t(r,{value:e.__("Room"),class:"mt-4"},null,8,["value"]),b(s("select",{"onUpdate:modelValue":a=>o.room_id=a,class:"mt-1 block w-full border-slate-300 rounded-md text-sm"},[(n(!0),d(v,null,g(l.availableRooms,a=>(n(),d("option",{value:a.id,key:a.id},m(a.name),9,ae))),128))],8,le),[[w,o.room_id]])]),s("div",ie,[t(r,{value:" ",class:"mt-4"}),t(D,{onClick:a=>u.deleteEntry(k),class:"mt-8 block min-w-fit"},{default:c(()=>[f(m(e.__("Delete")),1)]),_:2},1032,["onClick"])])]))),128))]),s("div",ne,[t(J,{class:"ps-2 w-full mt-1",onClick:u.addBalance,disabled:l.form.processing},{default:c(()=>[f(m(e.__("Add An Appointment")),1)]),_:1},8,["onClick","disabled"])])])]),footer:c(()=>[s("div",re,[t(C,{onClick:i[3]||(i[3]=o=>u.CancelDlg())},{default:c(()=>[f(m(e.__("Cancel")),1)]),_:1}),t(J,{class:W(["ms-2",{"opacity-25":l.form.processing}]),onClick:u.submit,disabled:l.form.processing},{default:c(()=>[f(m(e.__("Save")),1)]),_:1},8,["onClick","class","disabled"])])]),_:1},8,["show"])}const Te=G(H,[["render",me]]);export{Te as default};
