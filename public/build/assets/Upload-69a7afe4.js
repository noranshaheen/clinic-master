import{J as g}from"./ActionMessage-529841b6.js";import{J}from"./ActionSection-14bbef3c.js";import{J as _}from"./Button-fce1e67a.js";import{J as b}from"./ConfirmationModal-2d2586d4.js";import{J as y}from"./DangerButton-bf3f8f1f.js";import{J as C}from"./DialogModal-9cb7d35f.js";import{J as F}from"./FormSection-60b88c5f.js";import{J as j}from"./Input-9c9fd5b2.js";import{J as A}from"./Checkbox-7ff4e1d6.js";import{J as D}from"./InputError-48880b4d.js";import{J as I}from"./Label-c6c7e0c2.js";import{J as S}from"./SecondaryButton-fb7ef34d.js";import{J as B}from"./SectionBorder-a45d0249.js";import{M as V}from"./vue3-multiselect.umd.min-89fe1e95.js";/* empty css                                                                  */import{_ as x}from"./_plugin-vue_export-helper-c27b6911.js";import{c as U,w as n,r as a,o as M,f as r,t as p,a as l,b as s}from"./app-98cccb0d.js";import"./SectionTitle-f26ec90c.js";import"./Modal-2ccc6cf7.js";/* empty css            */const w={components:{JetActionMessage:g,JetActionSection:J,JetButton:_,JetConfirmationModal:b,JetDangerButton:y,JetDialogModal:C,JetFormSection:F,JetInput:j,JetCheckbox:A,JetInputError:D,JetLabel:I,JetSecondaryButton:S,JetSectionBorder:B,Multiselect:V},data(){return{file:["",""],uploadingInvoices:!1,processing:!1,data:[],branches:[],issuer:[],taxpayerActivityCode:[],activities:[]}},methods:{ShowDialog(){this.uploadingInvoices=!0,axios.get(route("json.branches")).then(e=>{this.branches=e.data,this.form.issuer=this.branches[0]}).catch(e=>{}),axios.get("/json/ActivityCodes.json").then(e=>{this.activities=e.data,this.form.taxpayerActivityCode=this.activities[0]}).catch(e=>{})},CancleDlg(){this.uploadingInvoices=!1},handleFileUpload(e,t){this.file[t]=e.target.files[0]},submitFile(){let e=new FormData;e.append("file1",this.file[0]),e.append("file2",this.file[1]),e.append("issuer",this.issuer.Id),e.append("taxpayerActivityCode",this.taxpayerActivityCode.code),this.processing=!0;let t=this;axios.post(route("ms.invoices.upload"),e,{headers:{"Content-Type":"multipart/form-data"}}).then(u=>{t.processing=!1,t.$refs.inputFile.value=null,this.data=u.data}).catch(function(){t.processing=!1,t.$refs.inputFile.value=null,console.log("FAILURE!!")})}}},k={class:"grid grid-cols-1 gap-4"};function N(e,t,u,E,i,m){const d=a("jet-label"),c=a("multiselect"),f=a("jet-secondary-button"),v=a("jet-button"),h=a("jet-dialog-modal");return M(),U(h,{show:i.uploadingInvoices,onClose:t[6]||(t[6]=o=>i.uploadingInvoices=!1)},{title:n(()=>[r(p(e.__("Uploading invoices from MOBIS")),1)]),content:n(()=>[l("div",k,[l("div",null,[s(d,{value:e.__("Branch")},null,8,["value"]),s(c,{modelValue:i.issuer,"onUpdate:modelValue":t[0]||(t[0]=o=>i.issuer=o),label:"name",options:i.branches,placeholder:"Select branch"},null,8,["modelValue","options"])]),l("div",null,[s(d,{value:e.__("Branch Activity")},null,8,["value"]),s(c,{modelValue:i.taxpayerActivityCode,"onUpdate:modelValue":t[1]||(t[1]=o=>i.taxpayerActivityCode=o),label:"Desc_ar",options:i.activities,placeholder:"Select activity"},null,8,["modelValue","options"])]),l("div",null,[l("label",null,[r(p(e.__("Choose Summary File"))+" ",1),l("input",{type:"file",onChange:t[2]||(t[2]=o=>m.handleFileUpload(o,0)),ref:"inputFile1"},null,544)])]),l("div",null,[l("label",null,[r(p(e.__("Choose Details File"))+" ",1),l("input",{type:"file",onChange:t[3]||(t[3]=o=>m.handleFileUpload(o,1)),ref:"inputFile2"},null,544)])])])]),footer:n(()=>[s(f,{onClick:t[4]||(t[4]=o=>m.CancleDlg())},{default:n(()=>[r(p(e.__("Cancel")),1)]),_:1}),s(v,{class:"ms-2",onClick:t[5]||(t[5]=o=>m.submitFile()),disabled:i.processing},{default:n(()=>[r(p(e.__("Save")),1)]),_:1},8,["disabled"])]),_:1},8,["show"])}const le=x(w,[["render",N]]);export{le as default};
