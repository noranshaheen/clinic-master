import{J as b}from"./Button-fce1e67a.js";import{J as w}from"./DialogModal-9cb7d35f.js";import{J as S}from"./SecondaryButton-fb7ef34d.js";import{J as F}from"./Input-9c9fd5b2.js";import{k as f,d as r,b as d,w as c,r as _,o as a,f as m,t as s,F as J,g as k,e as h,a as t}from"./app-98cccb0d.js";import{_ as D}from"./_plugin-vue_export-helper-c27b6911.js";import"./Modal-2ccc6cf7.js";/* empty css            */const B={components:{JetButton:b,JetDialogModal:w,JetSecondaryButton:S,JetInput:F,axios:f},props:{prescription:{default:null}},data(){return{showDialog:!1,total:0,partialy_paid:0,message:null,form:this.$inertia.form({paid:0,appointment:null})}},methods:{ShowDialog(){this.showDialog=!0,this.message=null,console.log(this.prescription),this.prescription!==null&&this.prescription.length>0?(this.form.appointment=this.prescription[0].appointment_id,this.getTotalServiceFees(this.prescription[0].prescription_items)):this.message="Not Fount Any Additional Payments",this.prescription[0].appointment.payment==null&&(this.message="You Have To Pay Detection Fees First")},getTotalServiceFees(e){var o=0;e.forEach(l=>{l.service_fees!==null&&(o+=Number(l.service_fees))}),this.total=o},getPaidServiceFees(e){return e.appointment.payment.service_fees?(this.partialy_paid=e.appointment.payment.service_fees,this.partialy_paid):"Not Paid"},getRemainingOfServiceFees(){return this.total-this.partialy_paid},save(){f.post(route("payments.payServiceFees"),this.form).then(e=>{this.$store.dispatch("setSuccessFlashMessage",!0),this.close()}).catch(e=>{})},close(){this.showDialog=!1,this.form.reset(),this.total=0,this.partialy_paid=0,this.message=null}}},x={key:0,class:"w-full"},C={class:"border"},N={key:0,class:"bg-[#f8f9fa] p-2 w-1/3 text-center"},P={key:1,class:"flex justify-start content-center items-center"},V={class:"border"},j={class:"bg-[#f8f9fa] p-2 w-3/5 text-center"},T={class:"font-bold"},R={class:"border"},A={class:"bg-[#f8f9fa] p-2 w-3/5 text-center"},E={class:"font-bold"},M={class:"border"},O={class:"bg-[#f8f9fa] p-2 w-3/5 text-center"},H={class:"font-bold"},I={class:"border"},L={class:"bg-[#f8f9fa] p-2 w-3/5 text-center"},U={class:"border"},W={key:1},Y={class:"text-center text-red-600 my-5"},q=t("i",{class:"fa fa-exclamation-circle mr-1"},null,-1);function z(e,o,l,G,n,p){const u=_("jet-input"),g=_("JetButton"),v=_("JetSecondaryButton"),y=_("jet-dialog-modal");return a(),r("div",null,[d(y,{show:n.showDialog,onClose:o[3]||(o[3]=i=>n.showDialog=!1),maxWidth:"md"},{title:c(()=>[m(s(e.__("Service Fees Details")),1)]),content:c(()=>[n.message===null?(a(),r("table",x,[(a(!0),r(J,null,k(l.prescription[0].prescription_items,i=>(a(),r("tr",C,[i.service_fees!==null?(a(),r("td",N,s(i.drugs.name),1)):h("",!0),i.service_fees!==null?(a(),r("td",P,[t("span",null,s(i.service_fees),1)])):h("",!0)]))),256)),t("tr",V,[t("th",j,s(e.__("Total")),1),t("td",T,s(n.total),1)]),t("tr",R,[t("th",A,s(e.__("Paid Service Fees")),1),t("td",E,s(e.__(p.getPaidServiceFees(l.prescription[0]))),1)]),t("tr",M,[t("th",O,s(e.__("Remains")),1),t("td",H,s(p.getRemainingOfServiceFees()),1)]),t("tr",I,[t("th",L,s(e.__("Pay")),1),t("tr",U,[d(u,{id:"type",type:"number",class:"block w-full rounded",modelValue:n.form.paid,"onUpdate:modelValue":o[0]||(o[0]=i=>n.form.paid=i)},null,8,["modelValue"])])])])):(a(),r("div",W,[t("p",Y,[q,m(s(e.__(n.message)),1)])]))]),footer:c(()=>[d(g,{class:"ml-2",onClick:o[1]||(o[1]=i=>p.save())},{default:c(()=>[m(s(e.__("Save")),1)]),_:1}),d(v,{class:"ml-2",onClick:o[2]||(o[2]=i=>p.close())},{default:c(()=>[m(s(e.__("Close")),1)]),_:1})]),_:1},8,["show"])])}const oe=D(B,[["render",z]]);export{oe as default};
