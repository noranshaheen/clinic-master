import{k as f,c as A,w as h,r as g,o as n,b as a,a as e,f as y,t as r,d as i,F as u,g as _,n as X,h as F,e as b,i as m,v as V,m as C,u as D}from"./app-010fad37.js";import{A as P}from"./AppLayout-b94f7417.js";import{J as M}from"./Label-e291ccc6.js";import{J as R}from"./Button-11813b5e.js";import{J as S}from"./SecondaryButton-8a1eaf86.js";import{J as q}from"./DangerButton-367e534b.js";import{T as H}from"./TextField-f89d8302.js";import{M as O}from"./vue3-multiselect.umd.min-939aa207.js";import W from"./EditLine-d8888d4a.js";import z from"./Show-e17fe0d4.js";import E from"./Edit-ac2c7a4e.js";import G from"./Edit-f0a32ffc.js";import K from"./Information-e28550ab.js";/* empty css                                                                  */import{_ as Q}from"./_plugin-vue_export-helper-c27b6911.js";/* empty css            */import"./Edit-74f06fe7.js";import"./ActionMessage-517545cc.js";import"./ActionSection-2c866042.js";import"./SectionTitle-8abeab5a.js";import"./ConfirmationModal-0f300aca.js";import"./Modal-97755a3c.js";import"./DialogModal-22356253.js";import"./FormSection-bd296fee.js";import"./Input-8a286b7b.js";import"./Checkbox-ebdeef89.js";import"./InputError-317c03cf.js";import"./SectionBorder-822e764c.js";import"./ValidationErrors-31471297.js";import"./Edit-a73070bb.js";import"./Edit-7abb2ae3.js";import"./Edit-18d907dc.js";import"./Edit-16ea2851.js";import"./Edit-b486f9ab.js";import"./Edit-ec7eaf71.js";import"./Edit-b040ada8.js";import"./Edit-f6f19305.js";import"./Edit-67e94b24.js";import"./Edit-a5179c0a.js";import"./Load-dcf8a148.js";import"./Load-b22526f9.js";import"./Edit-dd846932.js";import"./Upload-b17b92a3.js";import"./Upload-4dcf9d8b.js";import"./Upload-12291f8c.js";import"./Upload-1ea272cb.js";import"./Settings-f203d5a5.js";import"./Settings-3720bcf6.js";import"./Upload-3f1630e8.js";import"./Request-86128435.js";import"./Add-dd2dde44.js";import"./Load-a5c84528.js";import"./Upload-484af51f.js";import"./Load-6372f5e6.js";import"./sweetalert.min-679d9ee2.js";import"./ItemsMap-0f9ec3d1.js";import"./Upload-cd794d3e.js";import"./ItemsMap-5b7489db.js";import"./RequestEx-322cc660.js";const Y={components:{AppLayout:P,JetLabel:M,JetButton:R,JetSecondaryButton:S,JetDangerButton:q,DialogInvoiceLine:W,TextField:H,Multiselect:O,SecondaryButton:S,ShowPrescription:z,AddAnalysisDialog:E,AddXraysDialog:G,PatientInfo:K},props:{},data(){return{tab_idx:1,allClinics:[],selected_clinic:"",allItems:[],prescription_details:"",appointments:[],current_patient_name:"",patient_history:[],drugs:[],temp_drugs:[],doses:[],durations:[],all_diagnosis:[],errors:[],analysis:!1,all_analysis:[],all_rays:[],rays:!1,checkedDiagnosis:[],checkedDrugs:[],current_patient_info:"",form:this.$inertia.form({appointment_id:"",patient_id:"",dateTimeIssued:new Date().toISOString().slice(0,16),prescriptionLines:[],diagnosis:[],analysis:[],rays:[],notes:"",selected_clinic:"",checkedItems:[]})}},methods:{getAppointments(){f.get(route("appointment.today",this.selected_clinic.id)).then(s=>{this.appointments=s.data,console.log(s.data)}).catch(s=>{})},getDiagnosis(){f.get(route("diagnosi.allSpeciatlyDiagnosis")).then(s=>{this.all_diagnosis=s.data,console.log(s.data)})},getAnalysis(){f.get(route("analysi.allSpeciatlyAnalysis")).then(s=>{this.all_analysis=s.data,console.log(s.data)})},getXray(){f.get(route("xray.allSpeciatlyRays")).then(s=>{this.all_rays=s.data,console.log(s.data)})},AddNewAnalysis(){this.$nextTick(()=>this.$refs.dlg2.ShowDialog())},AddNewXray(){this.$nextTick(()=>this.$refs.dlg3.ShowDialog())},getDrugs:function(s){for(var o=0;o<s.drugs.length;o++){var w=this.temp_drugs.map(k=>k.id);if(this.temp_drugs.length!=0)if(!w.includes(s.drugs[o].id))this.temp_drugs.push(s.drugs[o]);else continue;else this.temp_drugs.push(s.drugs[o])}},check:function(s){if(this.form.prescriptionLines.length==0)this.form.prescriptionLines.push(s);else for(var o=0;o<this.form.prescriptionLines.length;o++){var w=this.form.prescriptionLines.map(k=>k.id);if(!w.includes(s.id))this.form.prescriptionLines.push(s);else continue}},deleteItem:function(s,o){o.splice(s,1)},AddAnalysis:function(){this.analysis=!0},AddRays:function(){this.rays=!0},nameWithId:function({id:s,name:o}){return s+" - "+o},getPrice(s){var o=Number.parseFloat(s.selling_price)*Number.parseFloat(s.quantity);return o},openDlg(s){this.prescription_details=s,this.$nextTick(()=>this.$refs.dlg1.ShowDialog())},getHistory(s,o,w){f.get(route("patient.history",s)).then(k=>{console.log(k.data),this.form.patient_id=s,this.patient_history=k.data,this.current_patient_name=o,this.form.appointment_id=w})},getPatientInfo(s){this.current_patient_info=s[0].patient,this.$nextTick(()=>this.$refs.dlg4.ShowDialog())},onCancel:function(){window.location.reload()},onSave:function(){var s=this.all_diagnosis.filter(o=>o.selected);this.form.diagnosis=s.map(o=>o.name),this.form.selected_clinic=this.selected_clinic,f.post(route("prescriptions.store"),this.form).then(o=>{this.$store.dispatch("setSuccessFlashMessage",!0),this.processing=!1,this.form.reset(),this.form.processing=!1,this.temp_drugs=[],this.getAppointments(),this.getDiagnosis(),this.getAnalysis()}).catch(o=>{this.form.processing=!1,this.errors=o.response.data.errors})}},created:function(){this.getDiagnosis(),this.getAnalysis(),this.getXray(),f.get(route("drug.all")).then(o=>{this.drugs=o.data}).catch(o=>{}),f.get(route("doses")).then(o=>{this.doses=o.data}),f.get(route("durations")).then(o=>{this.durations=o.data}),f.get(route("clinic.all")).then(o=>{this.allClinics=o.data}),f.get(route("items.index")).then(o=>{this.allItems=o.data,console.log("items",o.data)})}},Z={class:"py-2 mx-auto"},$={class:"mx-auto sm:px-4 lg:px-6"},ee={class:"bg-white shadow-xl sm:rounded-lg px-2 pb-2 pt-0"},te={class:"grid grid-cols-12 gap-4"},se={class:"mx-2 col-span-3"},oe={class:"col-span-9"},le={class:"flex justify-start sm:grid-cols-1 mt-2"},ne={class:""},ie={key:0,class:"flex justify-start flex-wrap"},re={class:"grid grid-cols-3 gap-4 my-4"},ae={class:"col-span-1 border-r-2 relative shadow-lg sm:rounded-lg bg-white px-1"},de={class:"h-full"},ce={class:"flex items-center border-b border-gray-200"},ue={key:0,class:"mx-auto w-full mt-4 border border-[#eceeef]"},_e={class:"text-center p-2 font-bold bg-[#f8f9fa] w-full"},pe={key:1,class:"w-full"},me={class:"border"},he={class:"p-2 font-bold text-center bg-[#f8f9fa] w-1/3"},fe={class:"p-2"},ge={class:"list-disc list-inside"},ye={key:0},be={class:"border"},ve={class:"p-2 font-bold text-center bg-[#f8f9fa]"},xe={class:"p-2"},ke={class:"mb-2"},we={class:"flex justify-between items-center"},Ce={class:"font-bold"},De=["onClick"],Ae={class:"flex justify-between"},Ve=["onUpdate:modelValue"],Se={id:"doses"},je=["value"],Ue=["onUpdate:modelValue"],Ie={class:"border"},Ne={class:"p-2 font-bold text-center bg-[#f8f9fa]"},Le={class:"p-2"},Be={class:"list-disc list-inside"},Je={class:"border"},Te={class:"p-2 font-bold text-center bg-[#f8f9fa]"},Xe={class:"p-2"},Fe={class:"list-disc list-inside"},Pe={class:"border"},Me={class:"p-2 font-bold text-center bg-[#f8f9fa]"},Re={class:"p-2"},qe={class:"mb-2"},He={class:"flex justify-between items-center"},Oe={class:"font-bold"},We={class:"flex justify-between"},ze=["onUpdate:modelValue"],Ee=["onUpdate:modelValue"],Ge={class:"border"},Ke={class:"p-2 font-bold text-center bg-[#f8f9fa]"},Qe={class:"p-2"},Ye={key:2,class:"m-5"},Ze={class:"text-center text-red-600"},$e=e("i",{class:"fa fa-exclamation-circle mr-1"},null,-1),et={key:3,class:"mt-4"},tt={class:"flex items-center justify-end"},st={class:"flex flex-col justify-between"},ot={key:0,class:"mx-auto w-full mt-4 border border-[#eceeef]"},lt={key:1,class:"overflow-x-auto w-full"},nt={class:"w-full mx-auto lg:max-w-full"},it={class:"text-center bg-gray-300"},rt={class:"bg-[#f8f9fa] p-3 border border-[#eceeef]"},at={class:"bg-[#f8f9fa] p-3 border border-[#eceeef]"},dt=e("th",{class:"bg-[#f8f9fa] p-3 border border-[#eceeef]"},null,-1),ct={class:"p-2 border border-[#eceeef]"},ut={class:"p-2 border border-[#eceeef]"},_t={class:"list-disc list-inside"},pt={class:"text-center p-2 border border-[#eceeef]"},mt=e("i",{class:"fa fa-info fa-lg"},null,-1),ht={key:2,class:"my-4"},ft={class:"text-center text-red-600"},gt=e("i",{class:"fa fa-exclamation-circle mr-1"},null,-1),yt={class:"col-span-2 relative shadow-lg sm:rounded-lg bg-white p-4"},bt={class:"mb-4 pb-2 border-b-2"},vt={class:"m-2 text-gray-400 text-sm"},xt={class:"flex justify-start flex-wrap my-4"},kt=["id","value","onUpdate:modelValue","onChange"],wt=["for"],Ct={class:"m-2 text-gray-400 text-sm"},Dt={class:"my-4 pb-2 border-b-2"},At={key:0,class:"inline"},Vt={class:"my-4 mx-2"},St=["id","value","onChange"],jt=["for"],Ut={class:"my-2 pb-2 border-b-2"},It={class:"m-2 text-gray-400 text-sm"},Nt={key:0,class:"flex justify-start"},Lt=["id","value","onUpdate:modelValue"],Bt=["for"],Jt={class:"flex items-center justify-end mt-4"},Tt=e("i",{class:"fa fa-plus mr-1"},null,-1),Xt={class:"my-2 pb-2 border-b-2"},Ft={class:"m-2 text-gray-400 text-sm"},Pt={key:0,class:"flex justify-start"},Mt=["id","value","onUpdate:modelValue"],Rt=["for"],qt={class:"flex items-center justify-end mt-4"},Ht=e("i",{class:"fa fa-plus mr-1"},null,-1),Ot={class:"mb-4 pb-2 border-b-2"},Wt={class:"m-2 text-gray-400 text-sm"},zt={class:"flex justify-start flex-wrap my-4"},Et={key:0},Gt=["id","value"],Kt=["for"],Qt={class:"my-1"},Yt={class:"my-1"};function Zt(s,o,w,k,l,c){const j=g("patient-info"),U=g("show-prescription"),I=g("add-analysis-dialog"),N=g("add-xrays-dialog"),x=g("jet-label"),L=g("multiselect"),v=g("jet-button"),B=g("jet-secondary-button"),J=g("secondary-button"),T=g("app-layout");return n(),A(T,null,{default:h(()=>[a(j,{ref:"dlg4",patient:l.current_patient_info},null,8,["patient"]),a(U,{ref:"dlg1",prescription:l.prescription_details},null,8,["prescription"]),a(I,{ref:"dlg2",onSave:o[0]||(o[0]=t=>c.getAnalysis())},null,512),a(N,{ref:"dlg3",onSave:o[1]||(o[1]=t=>c.getXray())},null,512),e("div",Z,[e("div",$,[e("div",ee,[e("div",te,[e("div",se,[a(x,{class:"py-4",value:s.__("Select Clinic")},null,8,["value"]),a(L,{modelValue:l.selected_clinic,"onUpdate:modelValue":o[2]||(o[2]=t=>l.selected_clinic=t),label:"name",options:l.allClinics,placeholder:"Branch",searchable:!0,class:"text-sm"},null,8,["modelValue","options"]),a(v,{onClick:c.getAppointments,class:"my-2"},{default:h(()=>[y(r("Search"))]),_:1},8,["onClick"])]),e("div",oe,[e("div",le,[e("div",ne,[a(x,{class:"py-4",value:s.__("Patients")},null,8,["value"]),l.appointments.length>0?(n(),i("div",ie,[(n(!0),i(u,null,_(l.appointments,t=>(n(),i("div",{key:t.patient_id,class:"my-2 mx-2"},[t.patient_id!==null&&t.cancelled==null?(n(),A(v,{key:0,class:X({"bg-green-400":t.done}),onClick:F(d=>c.getHistory(t.patient_id,t.patient.name,t.id),["prevent"])},{default:h(()=>[y(r(t.patient.name),1)]),_:2},1032,["class","onClick"])):b("",!0)]))),128))])):b("",!0)])])])])]),e("div",re,[e("div",ae,[e("div",de,[e("div",ce,[a(v,{onClick:o[3]||(o[3]=t=>l.tab_idx=1),disabled:l.tab_idx==1,isRounded:!1,class:"w-1/2 md:h-full"},{default:h(()=>[y(r(s.__("prescrption")),1)]),_:1},8,["disabled"]),a(v,{onClick:o[4]||(o[4]=t=>l.tab_idx=2),disabled:l.tab_idx==2,isRounded:!1,class:"w-1/2 md:h-full"},{default:h(()=>[y(r(s.__("history")),1)]),_:1},8,["disabled"])]),m(e("div",null,[l.current_patient_name?(n(),i("div",ue,[e("div",_e,[e("i",{onClick:o[5]||(o[5]=t=>c.getPatientInfo(l.patient_history)),class:"fa fa-exclamation-circle mr-2 cursor-pointer border rounded-full"}),e("span",null,r(l.current_patient_name),1)])])):b("",!0),l.current_patient_name?(n(),i("table",pe,[e("tr",me,[e("td",he,r(s.__("Diagnosis")),1),e("td",fe,[(n(!0),i(u,null,_(l.all_diagnosis,t=>(n(),i("ul",ge,[t.selected?(n(),i("li",ye,r(t.name),1)):b("",!0)]))),256))])]),e("tr",be,[e("td",ve,r(s.__("Drugs")),1),e("td",xe,[(n(!0),i(u,null,_(l.form.prescriptionLines,(t,d)=>(n(),i("ul",null,[e("li",ke,[e("div",we,[e("span",Ce,r(t.name),1),e("i",{class:"fa fa-delete-left cursor-pointer text-red-500",onClick:p=>c.deleteItem(d,l.form.prescriptionLines)},null,8,De)]),e("div",Ae,[m(e("input",{list:"doses",id:"dose","onUpdate:modelValue":p=>t.dose=p,placeholder:"dose",class:"border w-3/5 pl-2"},null,8,Ve),[[C,t.dose]]),e("datalist",Se,[(n(!0),i(u,null,_(l.doses,p=>(n(),i("option",{value:p.name},null,8,je))),256))]),m(e("input",{type:"text","onUpdate:modelValue":p=>t.cost=p,placeholder:"cost",class:"w-2/5"},null,8,Ue),[[C,t.cost]])])])]))),256))])]),e("tr",Ie,[e("td",Ne,r(s.__("Analysis")),1),e("td",Le,[(n(!0),i(u,null,_(l.form.analysis,t=>(n(),i("ul",Be,[e("li",null,r(t),1)]))),256))])]),e("tr",Je,[e("td",Te,r(s.__("X-ray")),1),e("td",Xe,[(n(!0),i(u,null,_(l.form.rays,t=>(n(),i("ul",Fe,[e("li",null,r(t),1)]))),256))])]),e("tr",Pe,[e("td",Me,r(s.__("Consumables")),1),e("td",Re,[(n(!0),i(u,null,_(l.form.checkedItems,(t,d)=>(n(),i("ul",null,[e("li",qe,[e("div",He,[e("span",Oe,r(t.name+" ("+t.measurement_unit+")"),1)]),e("div",We,[m(e("input",{type:"number",step:"0.1","onUpdate:modelValue":p=>t.quantity=p,placeholder:"quantity",class:"w-2/5"},null,8,ze),[[C,t.quantity]]),m(e("input",{type:"text","onUpdate:modelValue":p=>t.selling_price=p,placeholder:"cost",class:"w-3/5"},null,8,Ee),[[C,t.selling_price]])])])]))),256))])]),e("tr",Ge,[e("td",Ke,r(s.__("Notes")),1),e("td",Qe,r(l.form.notes),1)])])):(n(),i("div",Ye,[e("p",Ze,[$e,y(" "+r(s.__("Please select a patient")),1)])])),l.current_patient_name?(n(),i("div",et,[e("div",tt,[a(B,{onClick:o[6]||(o[6]=t=>c.onCancel())},{default:h(()=>[y(r(s.__("Cancel")),1)]),_:1}),a(v,{class:"ms-2",onClick:o[7]||(o[7]=t=>c.onSave())},{default:h(()=>[y(r(s.__("Save")),1)]),_:1})])])):b("",!0)],512),[[V,l.tab_idx==1]]),m(e("div",st,[e("div",null,[l.current_patient_name?(n(),i("div",ot,[m(e("input",{class:"text-center p-2 font-bold bg-[#f8f9fa] w-full","onUpdate:modelValue":o[8]||(o[8]=t=>l.current_patient_name=t)},null,512),[[C,l.current_patient_name]])])):b("",!0),l.patient_history.length>0?(n(),i("div",lt,[e("table",nt,[e("thead",it,[e("th",rt,r(s.__("Date")),1),e("th",at,r(s.__("Diagnosis")),1),dt]),e("tbody",null,[(n(!0),i(u,null,_(l.patient_history,t=>(n(),i("tr",{key:t.id,class:"border border-[#eceeef]"},[e("td",ct,r(new Date(t.created_at).toLocaleDateString()),1),e("td",ut,[e("ul",_t,[(n(!0),i(u,null,_(JSON.parse(t.diagnosis),d=>(n(),i("li",null,r(d),1))),256))])]),e("td",pt,[a(J,{onClick:d=>c.openDlg(t)},{default:h(()=>[mt]),_:2},1032,["onClick"])])]))),128))])])])):(n(),i("div",ht,[e("p",ft,[gt,y(" "+r(s.__("No Records Were Found")),1)])]))])],512),[[V,l.tab_idx==2]])])]),e("div",yt,[e("div",bt,[a(x,{value:s.__("Diagnosis")},null,8,["value"]),e("span",vt,r(s.__("(you can choose multiple options)")),1),e("div",xt,[(n(!0),i(u,null,_(l.all_diagnosis,t=>(n(),i("button",{key:t.id,class:"my-4 mx-2"},[m(e("input",{type:"checkbox",class:"peer sr-only",id:t.name,name:"diagnosis",value:t.name,"onUpdate:modelValue":d=>t.selected=d,onChange:d=>c.getDrugs(t)},null,40,kt),[[D,t.selected]]),e("label",{for:t.name,class:"cursor-pointer p-2 rounded-md text-center text-sm border shadow peer-checked:bg-green-500"},r(t.name),9,wt)]))),128))])]),e("div",null,[a(x,{value:s.__("Drug")},null,8,["value"]),e("span",Ct,r(s.__("(you can choose multiple options)")),1),e("div",Dt,[l.temp_drugs.length!=0?(n(),i("div",At,[(n(!0),i(u,null,_(l.temp_drugs,(t,d)=>(n(),i("button",Vt,[m(e("input",{type:"checkbox",class:"peer sr-only",id:t.name,name:"drug",value:{drg:t,dose:null,cost:null},"onUpdate:modelValue":o[9]||(o[9]=p=>l.checkedDrugs=p),onChange:p=>c.check(t)},null,40,St),[[D,l.checkedDrugs]]),e("label",{for:t.name,class:"cursor-pointer p-2 text-sm rounded-md text-center border shadow peer-checked:bg-green-500"},r(t.name),9,jt)]))),256))])):b("",!0)]),e("div",Ut,[a(x,{value:s.__("Analysis")},null,8,["value"]),e("span",It,r(s.__("(you can choose multiple options)")),1),l.analysis?(n(),i("div",Nt,[(n(!0),i(u,null,_(l.all_analysis,t=>(n(),i("button",{key:t.id,class:"my-4 mx-2"},[m(e("input",{type:"checkbox",class:"peer sr-only",id:t.name,name:"analysis",value:t.name,"onUpdate:modelValue":d=>l.form.analysis=d},null,8,Lt),[[D,l.form.analysis]]),e("label",{for:t.name,class:"cursor-pointer p-2 rounded-md text-sm text-center border shadow peer-checked:bg-green-500"},r(t.name),9,Bt)]))),128))])):b("",!0),e("div",Jt,[a(v,{class:"ms-2",onClick:o[10]||(o[10]=t=>c.AddNewAnalysis())},{default:h(()=>[Tt]),_:1}),a(v,{class:"ms-2",onClick:o[11]||(o[11]=t=>c.AddAnalysis())},{default:h(()=>[y(r(s.__("Add")),1)]),_:1})])]),e("div",Xt,[a(x,{value:s.__("X-ray")},null,8,["value"]),e("span",Ft,r(s.__("(you can choose multiple options)")),1),l.rays?(n(),i("div",Pt,[(n(!0),i(u,null,_(l.all_rays,t=>(n(),i("button",{key:t.id,class:"my-4 mx-2"},[m(e("input",{type:"checkbox",class:"peer sr-only",id:t.name,name:"rays",value:t.name,"onUpdate:modelValue":d=>l.form.rays=d},null,8,Mt),[[D,l.form.rays]]),e("label",{for:t.name,class:"cursor-pointer p-2 rounded-md text-sm text-center border shadow peer-checked:bg-green-500"},r(t.name),9,Rt)]))),128))])):b("",!0),e("div",qt,[a(v,{class:"ms-2",onClick:o[12]||(o[12]=t=>c.AddNewXray())},{default:h(()=>[Ht]),_:1}),a(v,{class:"ms-2",onClick:o[13]||(o[13]=t=>c.AddRays())},{default:h(()=>[y(r(s.__("Add")),1)]),_:1})])]),e("div",Ot,[a(x,{value:s.__("Consumables")},null,8,["value"]),e("span",Wt,r(s.__("(you can choose multiple options)")),1),e("div",zt,[(n(!0),i(u,null,_(l.allItems,t=>(n(),i("button",{key:t.id,class:"my-4 mx-2"},[t.hidden!==1?(n(),i("div",Et,[m(e("input",{type:"checkbox",class:"peer sr-only",id:t.name,name:"item",value:t,"onUpdate:modelValue":o[14]||(o[14]=d=>l.form.checkedItems=d)},null,8,Gt),[[D,l.form.checkedItems]]),e("label",{for:t.name,class:"cursor-pointer p-2 rounded-md text-center text-sm border shadow peer-checked:bg-green-500"},r(t.name),9,Kt)])):b("",!0)]))),128))])]),e("div",Qt,[a(x,{value:s.__("Notes"),class:"my-1"},null,8,["value"]),e("div",Yt,[m(e("input",{"onUpdate:modelValue":o[15]||(o[15]=t=>l.form.notes=t),type:"text",class:"w-full border border-gray-300 rounded"},null,512),[[C,l.form.notes]])])])])])])])])]),_:1})}const lo=Q(Y,[["render",Zt]]);export{lo as default};
