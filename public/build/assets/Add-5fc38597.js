import{A as I}from"./AppLayout-b94f7417.js";import{J as T}from"./Label-e291ccc6.js";import{J as D}from"./Button-11813b5e.js";import{J as x}from"./SecondaryButton-8a1eaf86.js";import{J as j}from"./DangerButton-367e534b.js";import{T as C}from"./TextField-f89d8302.js";import{M as k}from"./vue3-multiselect.umd.min-939aa207.js";import A from"./EditLine-d8888d4a.js";import{k as c,c as N,w as p,r as a,o as f,b as l,a as e,f as m,t as r,d as g,g as S,F as J}from"./app-010fad37.js";import B from"./Edit-dd846932.js";/* empty css                                                                  */import{_ as F}from"./_plugin-vue_export-helper-c27b6911.js";import"./Edit-74f06fe7.js";import"./ActionMessage-517545cc.js";import"./ActionSection-2c866042.js";import"./SectionTitle-8abeab5a.js";import"./ConfirmationModal-0f300aca.js";import"./Modal-97755a3c.js";import"./DialogModal-22356253.js";import"./FormSection-bd296fee.js";import"./Input-8a286b7b.js";import"./Checkbox-ebdeef89.js";import"./InputError-317c03cf.js";import"./SectionBorder-822e764c.js";import"./ValidationErrors-31471297.js";/* empty css            */import"./Edit-a73070bb.js";import"./Edit-7abb2ae3.js";import"./Edit-18d907dc.js";import"./Edit-16ea2851.js";import"./Edit-b486f9ab.js";import"./Edit-ec7eaf71.js";import"./Edit-b040ada8.js";import"./Edit-f6f19305.js";import"./Edit-67e94b24.js";import"./Edit-a5179c0a.js";import"./Load-dcf8a148.js";import"./Load-b22526f9.js";import"./Upload-b17b92a3.js";import"./Upload-4dcf9d8b.js";import"./Upload-12291f8c.js";import"./Upload-1ea272cb.js";import"./Settings-f203d5a5.js";import"./Settings-3720bcf6.js";import"./Upload-3f1630e8.js";import"./Request-86128435.js";import"./Add-dd2dde44.js";import"./Load-a5c84528.js";import"./Upload-484af51f.js";import"./Load-6372f5e6.js";import"./sweetalert.min-679d9ee2.js";import"./ItemsMap-0f9ec3d1.js";import"./Upload-cd794d3e.js";import"./ItemsMap-5b7489db.js";import"./RequestEx-322cc660.js";const P={components:{AppLayout:I,NewItemDialog:B,JetLabel:T,JetButton:D,JetSecondaryButton:x,JetDangerButton:j,DialogInvoiceLine:A,TextField:C,Multiselect:k},props:{},data(){return{doctors:[],clinics:[],items:[],units:[],errors:[],form:this.$inertia.form({billLines:[],doctor:"",clinic:"",date:"",billTotalAmount:0})}},methods:{AddItem:function(){this.form.billLines.push({item:"",unit:"",quantity:0,total:0})},addNewItemDialog(){this.$refs.dlg1.ShowDialog()},DeleteItem:function(t){this.form.billLines.splice(t,1)},onCancel:function(){window.location.reload()},totalAmount(){var t=0;if(this.form.billLines.length!=0)return this.form.billLines.forEach(o=>{t+=Number(o.total)}),this.form.billTotalAmount=t,t},onSave:function(){c.post(route("bills.store"),this.form).then(t=>{this.processing=!1,this.$nextTick(()=>this.$emit("dataUpdated")),this.form.reset(),this.form.processing=!1,this.tab_idx=1}).catch(t=>{this.form.processing=!1,this.$page.props.errors=t.response.data.errors,this.errors=t.response.data.errors})}},created:function(){c.get(route("doctor.all")).then(o=>{this.doctors=o.data}),c.get(route("clinic.all")).then(o=>{this.clinics=o.data}),c.get(route("items.index")).then(o=>{this.items=o.data,console.log(this.items)}),c.get("/json/UnitTypes.json").then(o=>{this.units=o.data}).catch(o=>{})}},q={class:"py-4"},E={class:"mx-auto sm:px-6 lg:px-8"},L={class:"bg-white overflow-visible shadow-xl sm:rounded-lg px-4 pb-4 pt-0"},M={class:"grid lg:grid-cols-3 gap-4 sm:grid-cols-1 h-1/2 overflow-visible"},z={class:""},Q={class:""},G={class:""},H={class:"result my-5 w-full"},K={class:"w-full mx-auto max-w-4xl lg:max-w-full"},O={class:"text-center bg-gray-300"},R={class:"bg-[#f8f9fa] p-1 border border-[#eceeef] w-3/12"},W=e("i",{class:"fa-solid fa-plus"},null,-1),X=[W],Y={class:"bg-[#f8f9fa] p-1 border border-[#eceeef]"},Z={class:"bg-[#f8f9fa] p-1 border border-[#eceeef]"},$={class:"bg-[#f8f9fa] p-1 border border-[#eceeef]"},ee={class:"bg-[#f8f9fa] p-1 border border-[#eceeef]"},te={class:"bg-[#f8f9fa] p-1 border border-[#eceeef]"},oe={class:"text-center border border-[#eceeef] w-5/12"},se={class:"border border-[#eceeef]"},le={class:"p-1 border border-[#eceeef]"},re={class:"p-1 border border-[#eceeef]"},ie={class:"p-1 border border-[#eceeef]"},ne={class:"p-1 border border-[#eceeef]"},ae={class:"p-1 border border-[#eceeef]"},de={class:"p-1 border border-[#eceeef]"},me={class:"flex items-center justify-end mt-4"},ce={class:"capitalize py-2 text-gray-600 text-lg font-bold"},pe={class:"flex items-center justify-end mt-20"};function ue(t,o,_e,fe,i,d){const v=a("NewItemDialog"),h=a("jet-label"),u=a("multiselect"),_=a("TextField"),V=a("jet-danger-button"),b=a("jet-button"),y=a("jet-secondary-button"),w=a("app-layout");return f(),N(w,null,{default:p(()=>[l(v,{ref:"dlg1"},null,512),e("div",q,[e("div",E,[e("div",L,[e("div",M,[e("div",z,[l(h,{value:t.__("Clinic")},null,8,["value"]),l(u,{modelValue:i.form.clinic,"onUpdate:modelValue":o[0]||(o[0]=s=>i.form.clinic=s),label:"name",options:i.clinics,placeholder:"Select branch"},null,8,["modelValue","options"])]),e("div",Q,[l(h,{value:t.__("Doctor")},null,8,["value"]),l(u,{modelValue:i.form.doctor,"onUpdate:modelValue":o[1]||(o[1]=s=>i.form.doctor=s),label:"name",options:i.doctors,placeholder:"Select doctor"},null,8,["modelValue","options"])]),e("div",G,[l(_,{modelValue:i.form.date,"onUpdate:modelValue":o[2]||(o[2]=s=>i.form.date=s),itemType:"date",itemLabel:t.__("Date")},null,8,["modelValue","itemLabel"])])]),e("div",null,[e("div",null,[e("div",H,[e("table",K,[e("thead",O,[e("th",R,[m(r(t.__("Item"))+" ",1),e("button",{onClick:o[3]||(o[3]=s=>d.addNewItemDialog()),class:"cursor-pointer ml-4"},X)]),e("th",Y,r(t.__("Unit")),1),e("th",Z,r(t.__("Purches Price Per Unit")),1),e("th",$,r(t.__("Quantity")),1),e("th",ee,r(t.__("Total")),1),e("th",te,r(t.__("Action")),1)]),e("tbody",oe,[(f(!0),g(J,null,S(i.form.billLines,(s,U)=>(f(),g("tr",se,[e("td",le,[l(u,{modelValue:s.item,"onUpdate:modelValue":n=>s.item=n,label:"name",options:i.items,placeholder:"Select Item",searchable:!0},null,8,["modelValue","onUpdate:modelValue","options"])]),e("td",re,[l(u,{modelValue:s.unit,"onUpdate:modelValue":n=>s.unit=n,options:i.units,label:"desc_en",placeholder:"unit",searchable:!0},null,8,["modelValue","onUpdate:modelValue","options"])]),e("td",ie,[l(_,{modelValue:s.unitPrice,"onUpdate:modelValue":n=>s.unitPrice=n,itemType:"number"},null,8,["modelValue","onUpdate:modelValue"])]),e("td",ne,[l(_,{modelValue:s.quantity,"onUpdate:modelValue":n=>s.quantity=n,itemType:"number"},null,8,["modelValue","onUpdate:modelValue"])]),e("td",ae,[l(_,{modelValue:s.total,"onUpdate:modelValue":n=>s.total=n,itemType:"number"},null,8,["modelValue","onUpdate:modelValue"])]),e("td",de,[l(V,{class:"ms-2",onClick:n=>d.DeleteItem(U)},{default:p(()=>[m(r(t.__("Delete")),1)]),_:2},1032,["onClick"])])]))),256))])])]),e("div",me,[l(b,{class:"ms-2",onClick:o[4]||(o[4]=s=>d.AddItem())},{default:p(()=>[m(r(t.__("Add New Item")),1)]),_:1})]),e("h3",ce,[m(r(t.__("Invoice Total")+" :")+" ",1),e("span",null,r(d.totalAmount()),1)])]),e("div",pe,[l(y,{onClick:o[5]||(o[5]=s=>d.onCancel())},{default:p(()=>[m(r(t.__("Cancel")),1)]),_:1}),l(b,{class:"ms-2",onClick:o[6]||(o[6]=s=>d.onSave())},{default:p(()=>[m(r(t.__("Save")),1)]),_:1})])])])])])]),_:1})}const bt=F(P,[["render",ue]]);export{bt as default};
