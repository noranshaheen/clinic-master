import{A as T}from"./AppLayout-336b7499.js";import{J as A}from"./Label-c6c7e0c2.js";import{J as j}from"./Button-fce1e67a.js";import{J as N}from"./SecondaryButton-fb7ef34d.js";import{J}from"./DangerButton-bf3f8f1f.js";import{T as S}from"./TextField-4dc08153.js";import{M as B}from"./vue3-multiselect.umd.min-89fe1e95.js";import U from"./EditLine-64c486c6.js";import{k as p,c as E,w as d,r as n,o as _,b as l,a as e,t as i,f as m,d as u,g as L,F as C}from"./app-98cccb0d.js";import{J as F}from"./ValidationErrors-ce3c07bd.js";import q from"./Edit-470aa9e5.js";/* empty css                                                                  */import{_ as P}from"./_plugin-vue_export-helper-c27b6911.js";import"./Edit-7ca2eef9.js";import"./ActionMessage-529841b6.js";import"./ActionSection-14bbef3c.js";import"./SectionTitle-f26ec90c.js";import"./ConfirmationModal-2d2586d4.js";import"./Modal-2ccc6cf7.js";import"./DialogModal-9cb7d35f.js";import"./FormSection-60b88c5f.js";import"./Input-9c9fd5b2.js";import"./Checkbox-7ff4e1d6.js";import"./InputError-48880b4d.js";import"./SectionBorder-a45d0249.js";/* empty css            */import"./Edit-cfad98b4.js";import"./Edit-04381c68.js";import"./Edit-c883850a.js";import"./Edit-663be45d.js";import"./Edit-833659c9.js";import"./Edit-e905c401.js";import"./Edit-fb9e1a40.js";import"./Edit-8b049cff.js";import"./Edit-7210d6e2.js";import"./Edit-9520adfe.js";import"./Load-c81154ca.js";import"./Load-269b27e0.js";import"./Edit-ae0efa3b.js";import"./Upload-3f7847e9.js";import"./Upload-cab6aca1.js";import"./Upload-4bb109cf.js";import"./Upload-91640e3b.js";import"./Settings-281c0c2c.js";import"./Settings-3a181d36.js";import"./Upload-b3182070.js";import"./Request-264efc19.js";import"./Add-983c5f77.js";import"./Load-b9d12279.js";import"./Upload-0c9409a0.js";import"./Load-c588859c.js";import"./sweetalert.min-9f604034.js";import"./ItemsMap-ac429fa2.js";import"./Upload-69a7afe4.js";import"./ItemsMap-99c5c9fb.js";import"./RequestEx-4f93fb5e.js";const $={components:{AppLayout:T,NewItemDialog:q,JetLabel:A,JetButton:j,JetSecondaryButton:N,JetDangerButton:J,DialogInvoiceLine:U,TextField:S,Multiselect:B,JetValidationErrors:F},props:{},data(){return{item:"",idx:"",doctors:[],clinics:[],items:[],units:[],errors:[],form:this.$inertia.form({billLines:[],clinic:"",date:"",billTotalAmount:0})}},methods:{AddItem:function(){this.form.billLines.push({item:"",unit:"",unitPrice:"",quantity:0,total:0})},addNewItemDialog(){this.$refs.dlg1.ShowDialog()},addNewILineDialog(){this.$nextTick(()=>{this.$refs.dlg2.ShowDialog()})},editLineDialog(t){this.item=JSON.parse(JSON.stringify(this.form.billLines[t])),this.idx=t,this.$nextTick(()=>{this.$refs.dlg3.ShowDialog()})},onAddLine(t){this.form.billLines.push({item:t.item,unit:t.unit,unitPrice:t.unitPrice,quantity:t.quantity,total:t.total})},onEditLine(t,o){this.form.billLines[o]=t,console.log(this.form.billLines)},deleteLine:function(t){this.form.billLines.splice(t,1)},onCancel:function(){window.location.reload()},totalAmount(){var t=0;if(this.form.billLines.length!=0)return this.form.billLines.forEach(o=>{t+=Number(o.total)}),this.form.billTotalAmount=t,t},onSave:function(){p.post(route("bills.administrative.store"),this.form).then(t=>{this.processing=!1,this.$nextTick(()=>this.$emit("dataUpdated")),this.form.reset(),this.form.processing=!1,this.tab_idx=1}).catch(t=>{this.form.processing=!1,this.$page.props.errors=t.response.data.errors,this.errors=t.response.data.errors})}},created:function(){p.get(route("doctor.all")).then(o=>{this.doctors=o.data}),p.get(route("clinic.all")).then(o=>{this.clinics=o.data}),p.get(route("items.index")).then(o=>{var b=o.data;this.items=b.filter(g=>g.storable==0)}),p.get("/json/UnitTypes.json").then(o=>{this.units=o.data}).catch(o=>{})}},M={class:"lg:py-2"},O={class:"mx-auto sm:px-6 lg:px-8"},z={class:"py-3 px-1"},Q={class:"bg-white shadow-xl sm:rounded-lg px-4 pb-4 pt-0"},G={class:"grid lg:grid-cols-2 gap-4 sm:grid-cols-1 h-1/2"},H={class:""},K={class:""},R={class:"w-full"},W={class:"w-full"},X={class:"result my-5 w-full"},Y={class:"w-full mx-auto md:hidden max-w-4xl lg:max-w-full"},Z={class:"text-center bg-gray-300"},ee={class:"bg-[#f8f9fa] p-1 border border-[#eceeef] w-3/12"},te=e("i",{class:"fa-solid fa-plus"},null,-1),oe=[te],se={class:"bg-[#f8f9fa] p-1 border border-[#eceeef]"},ie={class:"bg-[#f8f9fa] p-1 border border-[#eceeef]"},le={class:"bg-[#f8f9fa] p-1 border border-[#eceeef]"},re={class:"text-center border border-[#eceeef] w-5/12"},ne={class:"border border-[#eceeef]"},ae={class:"p-1 border border-[#eceeef]"},de={class:"p-1 border border-[#eceeef]"},me={class:"p-1 border border-[#eceeef]"},ce={class:"p-1 border border-[#eceeef]"},pe=e("i",{class:"fa fa-edit"},null,-1),_e=e("i",{class:"fa fa-trash"},null,-1),fe={class:"mx-auto hidden md:block md:w-full"},ue={class:"w-full text-center bg-gray-300"},he={class:"bg-[#f8f9fa] p-1 border border-[#eceeef] w-3/5"},be=e("i",{class:"fa-solid fa-plus"},null,-1),ge=[be],ve={class:"bg-[#f8f9fa] p-1 border border-[#eceeef] w-1/5"},we={class:"bg-[#f8f9fa] p-1 border border-[#eceeef] w-1/5"},ye={class:"w-full text-center border border-[#eceeef]"},ke={class:"border border-[#eceeef]"},Le={class:"p-1 border border-[#eceeef]"},Ce={class:"p-1 border border-[#eceeef]"},De={class:"p-1 border border-[#eceeef]"},Ve={class:"flex items-center justify-end mt-4"},xe={class:"capitalize py-2 text-gray-600 text-lg font-bold"},Ie={class:"flex items-center justify-end mt-20"};function Te(t,o,b,g,a,r){const D=n("NewItemDialog"),V=n("jet-validation-errors"),x=n("jet-label"),v=n("multiselect"),w=n("TextField"),y=n("jet-secondary-button"),k=n("jet-danger-button"),h=n("jet-button"),I=n("app-layout");return _(),E(I,null,{default:d(()=>[l(D,{ref:"dlg1"},null,512),e("div",M,[e("div",O,[l(V,{class:"mb-4"}),e("h2",z,i(t.__("Add Administrative Bill")),1),e("div",Q,[e("div",G,[e("div",H,[l(x,{value:t.__("Clinic")},null,8,["value"]),l(v,{modelValue:a.form.clinic,"onUpdate:modelValue":o[0]||(o[0]=s=>a.form.clinic=s),label:"name",options:a.clinics,placeholder:"Select branch"},null,8,["modelValue","options"])]),e("div",K,[l(w,{modelValue:a.form.date,"onUpdate:modelValue":o[1]||(o[1]=s=>a.form.date=s),itemType:"date",itemLabel:t.__("Date")},null,8,["modelValue","itemLabel"])])]),e("div",R,[e("div",W,[e("div",X,[e("table",Y,[e("thead",Z,[e("th",ee,[m(i(t.__("Item"))+" ",1),e("button",{onClick:o[2]||(o[2]=s=>r.addNewItemDialog()),class:"cursor-pointer ml-4"},oe)]),e("th",se,i(t.__("Quantity")),1),e("th",ie,i(t.__("Total")),1),e("th",le,i(t.__("Action")),1)]),e("tbody",re,[(_(!0),u(C,null,L(a.form.billLines,(s,f)=>(_(),u("tr",ne,[e("td",ae,[e("p",null,i(s.item.name),1)]),e("td",de,[e("p",null,i(s.quantity),1)]),e("td",me,[e("p",null,i(s.total),1)]),e("td",ce,[e("div",null,[l(y,{class:"ms-2",onClick:c=>r.editLineDialog(f)},{default:d(()=>[pe]),_:2},1032,["onClick"]),l(k,{class:"ms-2",onClick:c=>r.deleteLine(f)},{default:d(()=>[_e]),_:2},1032,["onClick"])])])]))),256))])]),e("table",fe,[e("thead",ue,[e("th",he,[m(i(t.__("Item"))+" ",1),e("button",{onClick:o[3]||(o[3]=s=>r.addNewItemDialog()),class:"cursor-pointer ml-4"},ge)]),e("th",ve,i(t.__("Total Price")),1),e("th",we,i(t.__("Action")),1)]),e("tbody",ye,[(_(!0),u(C,null,L(a.form.billLines,(s,f)=>(_(),u("tr",ke,[e("td",Le,[l(v,{modelValue:s.item,"onUpdate:modelValue":c=>s.item=c,label:"name",options:a.items,placeholder:"Select Item",searchable:!0},null,8,["modelValue","onUpdate:modelValue","options"])]),e("td",Ce,[l(w,{modelValue:s.total,"onUpdate:modelValue":c=>s.total=c,itemType:"number"},null,8,["modelValue","onUpdate:modelValue"])]),e("td",De,[l(k,{class:"ms-2",onClick:c=>r.deleteLine(f)},{default:d(()=>[m(i(t.__("Delete")),1)]),_:2},1032,["onClick"])])]))),256))])])]),e("div",Ve,[l(h,{class:"ms-2 md:hidden",onClick:o[4]||(o[4]=s=>r.addNewILineDialog())},{default:d(()=>[m(i(t.__("Add")),1)]),_:1}),l(h,{class:"ms-2 hidden md:inline-block",onClick:o[5]||(o[5]=s=>r.AddItem())},{default:d(()=>[m(i(t.__("Add")),1)]),_:1})]),e("h3",xe,[m(i(t.__("Invoice Total")+" :")+" ",1),e("span",null,i(r.totalAmount()),1)])]),e("div",Ie,[l(y,{onClick:o[6]||(o[6]=s=>r.onCancel())},{default:d(()=>[m(i(t.__("Cancel")),1)]),_:1}),l(h,{class:"ms-2",onClick:o[7]||(o[7]=s=>r.onSave())},{default:d(()=>[m(i(t.__("Save")),1)]),_:1})])])])])])]),_:1})}const Nt=P($,[["render",Te]]);export{Nt as default};
