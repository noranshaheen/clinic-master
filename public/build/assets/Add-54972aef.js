import{k as m,c as A,w as u,r as f,o as n,b as a,a as e,f as h,t as r,d as i,F as _,g as p,n as X,h as M,e as v,i as g,v as S,m as C,u as D}from"./app-150d5054.js";import{A as P}from"./AppLayout-f49bf28b.js";import{J as R}from"./Label-df30c280.js";import{J as F}from"./Button-4bcf952d.js";import{J as V}from"./SecondaryButton-713ac718.js";import{J as H}from"./DangerButton-8bc4ac7b.js";import{T as O}from"./TextField-3250345e.js";import{M as W}from"./vue3-multiselect.umd.min-0e68115f.js";import z from"./EditLine-0ace7ad9.js";import E from"./Show-2c593934.js";import q from"./Edit-09f7a352.js";import G from"./Edit-cfdc861e.js";import K from"./Information-cdb977ed.js";/* empty css                                                                  */import{_ as Q}from"./_plugin-vue_export-helper-c27b6911.js";/* empty css            */import"./Edit-bcfc13f2.js";import"./ActionMessage-61e2ac70.js";import"./ActionSection-b2837b81.js";import"./SectionTitle-3e354ea0.js";import"./ConfirmationModal-25a9f4bd.js";import"./Modal-af9a88ec.js";import"./DialogModal-abac778c.js";import"./FormSection-88b4b82e.js";import"./Input-1c19b971.js";import"./Checkbox-4a56b901.js";import"./InputError-a5d97e62.js";import"./SectionBorder-e50f0f2f.js";import"./ValidationErrors-d148bef4.js";import"./Edit-0682400b.js";import"./Edit-3c089fa6.js";import"./Edit-be99b5ee.js";import"./Edit-597f2255.js";import"./Edit-f9922137.js";import"./Edit-faa18d1d.js";import"./Edit-cd91fcb4.js";import"./Edit-07cd30d2.js";import"./Edit-34545e2b.js";import"./Edit-db4f3217.js";import"./Load-49470aa5.js";import"./Load-63f267b7.js";import"./Edit-ae599c19.js";import"./Upload-84ea7cbc.js";import"./Upload-9f5fa312.js";import"./Settings-16afee17.js";import"./Settings-c1b5727e.js";import"./Upload-ac8dd442.js";import"./Request-7a72620a.js";import"./Add-a5bec431.js";import"./Load-9cedd89f.js";import"./Upload-8acddc09.js";import"./Load-38871443.js";import"./sweetalert.min-d55a1c1c.js";import"./ItemsMap-522638f4.js";import"./Upload-92e0933c.js";import"./ItemsMap-e43ca060.js";import"./RequestEx-92427893.js";const Y={components:{AppLayout:P,JetLabel:R,JetButton:F,JetSecondaryButton:V,JetDangerButton:H,DialogInvoiceLine:z,TextField:O,Multiselect:W,SecondaryButton:V,ShowPrescription:E,AddAnalysisDialog:q,AddXraysDialog:G,PatientInfo:K},props:{},data(){return{tab_idx:1,allClinics:[],prescription_details:"",appointments:[],current_patient_name:"",patient_history:[],drugs:[],temp_drugs:[],doses:[],durations:[],all_diagnosis:[],errors:[],analysis:!1,all_analysis:[],all_rays:[],rays:!1,checkedDiagnosis:[],checkedDrugs:[],current_patient_info:"",form:this.$inertia.form({appointment_id:"",patient_id:"",dateTimeIssued:new Date().toISOString().slice(0,16),prescriptionLines:[],diagnosis:[],analysis:[],rays:[],notes:"",selected_clinic:""})}},methods:{getAppointments(){m.get(route("appointment.today",this.form.selected_clinic.id)).then(s=>{this.appointments=s.data,console.log(s.data)}).catch(s=>{})},getDiagnosis(){m.get(route("diagnosi.allSpeciatlyDiagnosis")).then(s=>{this.all_diagnosis=s.data,console.log(s.data)})},getAnalysis(){m.get(route("analysi.allSpeciatlyAnalysis")).then(s=>{this.all_analysis=s.data,console.log(s.data)})},getXray(){m.get(route("xray.allSpeciatlyRays")).then(s=>{this.all_rays=s.data,console.log(s.data)})},AddNewAnalysis(){this.$nextTick(()=>this.$refs.dlg2.ShowDialog())},AddNewXray(){this.$nextTick(()=>this.$refs.dlg3.ShowDialog())},getDrugs:function(s){for(var o=0;o<s.drugs.length;o++){var w=this.temp_drugs.map(x=>x.id);if(this.temp_drugs.length!=0)if(!w.includes(s.drugs[o].id))this.temp_drugs.push(s.drugs[o]);else continue;else this.temp_drugs.push(s.drugs[o])}},check:function(s){if(this.form.prescriptionLines.length==0)this.form.prescriptionLines.push(s);else for(var o=0;o<this.form.prescriptionLines.length;o++){var w=this.form.prescriptionLines.map(x=>x.id);if(!w.includes(s.id))this.form.prescriptionLines.push(s);else continue}},deleteItem:function(s){this.form.prescriptionLines.splice(s,1)},AddAnalysis:function(){this.analysis=!0},AddRays:function(){this.rays=!0},nameWithId:function({id:s,name:o}){return s+" - "+o},openDlg(s){this.prescription_details=s,this.$nextTick(()=>this.$refs.dlg1.ShowDialog())},getHistory(s,o,w){m.get(route("patient.history",s)).then(x=>{console.log(x.data),this.form.patient_id=s,this.patient_history=x.data,this.current_patient_name=o,this.form.appointment_id=w})},getPatientInfo(s){this.current_patient_info=s[0].patient,this.$nextTick(()=>this.$refs.dlg4.ShowDialog())},onCancel:function(){window.location.reload()},onSave:function(){var s=this.all_diagnosis.filter(o=>o.selected);this.form.diagnosis=s.map(o=>o.name),m.post(route("prescriptions.store"),this.form).then(o=>{this.$store.dispatch("setSuccessFlashMessage",!0),this.processing=!1,this.form.reset(),this.form.processing=!1,this.temp_drugs=[],this.getAppointments(),this.getDiagnosis(),this.getAnalysis()}).catch(o=>{this.form.processing=!1,this.errors=o.response.data.errors})}},created:function(){this.getDiagnosis(),this.getAnalysis(),this.getXray(),m.get(route("drug.all")).then(o=>{this.drugs=o.data}).catch(o=>{}),m.get(route("doses")).then(o=>{this.doses=o.data}),m.get(route("durations")).then(o=>{this.durations=o.data}),m.get(route("clinic.all")).then(o=>{this.allClinics=o.data})}},Z={class:"py-2 mx-auto"},$={class:"mx-auto sm:px-4 lg:px-6"},ee={class:"bg-white shadow-xl sm:rounded-lg px-2 pb-2 pt-0"},te={class:"grid grid-cols-12 gap-4"},se={class:"mx-2 col-span-3"},oe={class:"col-span-9"},le={class:"flex justify-start sm:grid-cols-1 mt-2"},ne={class:""},ie={key:0,class:"flex justify-start flex-wrap"},re={class:"grid grid-cols-3 gap-4 my-4"},ae={class:"col-span-1 border-r-2 relative shadow-lg sm:rounded-lg bg-white px-1"},de={class:"h-full"},ce={class:"flex items-center border-b border-gray-200"},ue={key:0,class:"mx-auto w-full mt-4 border border-[#eceeef]"},_e={class:"text-center p-2 font-bold bg-[#f8f9fa] w-full"},pe={key:1,class:"w-full"},me={class:"border"},fe={class:"p-2 font-bold text-center bg-[#f8f9fa] w-1/3"},he={class:"p-2"},ge={class:"list-disc list-inside"},ye={key:0},be={class:"border"},ve={class:"p-2 font-bold text-center bg-[#f8f9fa]"},xe={class:"p-2"},ke={class:"mb-2"},we={class:"flex justify-between items-center"},Ce={class:"font-bold"},De=["onClick"],Ae={class:"flex justify-between"},Se=["onUpdate:modelValue"],Ve={id:"doses"},je=["value"],Ue=["onUpdate:modelValue"],Le={class:"border"},Ne={class:"p-2 font-bold text-center bg-[#f8f9fa]"},Be={class:"p-2"},Ie={class:"list-disc list-inside"},Je={class:"border"},Te={class:"p-2 font-bold text-center bg-[#f8f9fa]"},Xe={class:"p-2"},Me={class:"list-disc list-inside"},Pe={class:"border"},Re={class:"p-2 font-bold text-center bg-[#f8f9fa]"},Fe={class:"p-2"},He={key:2,class:"m-5"},Oe={class:"text-center text-red-600"},We=e("i",{class:"fa fa-exclamation-circle mr-1"},null,-1),ze={key:3,class:"mt-4"},Ee={class:"flex items-center justify-end"},qe={class:"flex flex-col justify-between"},Ge={key:0,class:"mx-auto w-full mt-4 border border-[#eceeef]"},Ke={key:1,class:"overflow-x-auto w-full"},Qe={class:"w-full mx-auto lg:max-w-full"},Ye={class:"text-center bg-gray-300"},Ze={class:"bg-[#f8f9fa] p-3 border border-[#eceeef]"},$e={class:"bg-[#f8f9fa] p-3 border border-[#eceeef]"},et=e("th",{class:"bg-[#f8f9fa] p-3 border border-[#eceeef]"},null,-1),tt={class:"p-2 border border-[#eceeef]"},st={class:"p-2 border border-[#eceeef]"},ot={class:"list-disc list-inside"},lt={class:"text-center p-2 border border-[#eceeef]"},nt=e("i",{class:"fa fa-info fa-lg"},null,-1),it={key:2,class:"my-4"},rt={class:"text-center text-red-600"},at=e("i",{class:"fa fa-exclamation-circle mr-1"},null,-1),dt={class:"col-span-2 relative shadow-lg sm:rounded-lg bg-white p-4"},ct={class:"mb-4 pb-2 border-b-2"},ut={class:"m-2 text-gray-400 text-sm"},_t={class:"flex justify-start flex-wrap my-4"},pt=["id","value","onUpdate:modelValue","onChange"],mt=["for"],ft={class:"m-2 text-gray-400 text-sm"},ht={class:"my-4 pb-2 border-b-2"},gt={key:0,class:"inline"},yt={class:"my-4 mx-2"},bt=["id","value","onChange"],vt=["for"],xt={class:"my-2 pb-2 border-b-2"},kt={class:"m-2 text-gray-400 text-sm"},wt={key:0,class:"flex justify-start"},Ct=["id","value","onUpdate:modelValue"],Dt=["for"],At={class:"flex items-center justify-end mt-4"},St=e("i",{class:"fa fa-plus mr-1"},null,-1),Vt={class:"my-2 pb-2 border-b-2"},jt={class:"m-2 text-gray-400 text-sm"},Ut={key:0,class:"flex justify-start"},Lt=["id","value","onUpdate:modelValue"],Nt=["for"],Bt={class:"flex items-center justify-end mt-4"},It=e("i",{class:"fa fa-plus mr-1"},null,-1),Jt={class:"my-1"},Tt={class:"my-1"};function Xt(s,o,w,x,l,d){const j=f("patient-info"),U=f("show-prescription"),L=f("add-analysis-dialog"),N=f("add-xrays-dialog"),k=f("jet-label"),B=f("multiselect"),y=f("jet-button"),I=f("jet-secondary-button"),J=f("secondary-button"),T=f("app-layout");return n(),A(T,null,{default:u(()=>[a(j,{ref:"dlg4",patient:l.current_patient_info},null,8,["patient"]),a(U,{ref:"dlg1",prescription:l.prescription_details},null,8,["prescription"]),a(L,{ref:"dlg2",onSave:o[0]||(o[0]=t=>d.getAnalysis())},null,512),a(N,{ref:"dlg3",onSave:o[1]||(o[1]=t=>d.getXray())},null,512),e("div",Z,[e("div",$,[e("div",ee,[e("div",te,[e("div",se,[a(k,{class:"py-4",value:s.__("Select Clinic")},null,8,["value"]),a(B,{modelValue:l.form.selected_clinic,"onUpdate:modelValue":o[2]||(o[2]=t=>l.form.selected_clinic=t),label:"name",options:l.allClinics,placeholder:"Branch",searchable:!0,class:"text-sm"},null,8,["modelValue","options"]),a(y,{onClick:d.getAppointments,class:"my-2"},{default:u(()=>[h(r("Search"))]),_:1},8,["onClick"])]),e("div",oe,[e("div",le,[e("div",ne,[a(k,{class:"py-4",value:s.__("Patients")},null,8,["value"]),l.appointments.length>0?(n(),i("div",ie,[(n(!0),i(_,null,p(l.appointments,t=>(n(),i("div",{key:t.patient_id,class:"my-2 mx-2"},[t.patient_id!==null&&t.cancelled==null?(n(),A(y,{key:0,class:X({"bg-green-400":t.done}),onClick:M(c=>d.getHistory(t.patient_id,t.patient.name,t.id),["prevent"])},{default:u(()=>[h(r(t.patient.name),1)]),_:2},1032,["class","onClick"])):v("",!0)]))),128))])):v("",!0)])])])])]),e("div",re,[e("div",ae,[e("div",de,[e("div",ce,[a(y,{onClick:o[3]||(o[3]=t=>l.tab_idx=1),disabled:l.tab_idx==1,isRounded:!1,class:"w-1/2 md:h-full"},{default:u(()=>[h(r(s.__("prescrption")),1)]),_:1},8,["disabled"]),a(y,{onClick:o[4]||(o[4]=t=>l.tab_idx=2),disabled:l.tab_idx==2,isRounded:!1,class:"w-1/2 md:h-full"},{default:u(()=>[h(r(s.__("history")),1)]),_:1},8,["disabled"])]),g(e("div",null,[l.current_patient_name?(n(),i("div",ue,[e("div",_e,[e("i",{onClick:o[5]||(o[5]=t=>d.getPatientInfo(l.patient_history)),class:"fa fa-exclamation-circle mr-2 cursor-pointer border rounded-full"}),e("span",null,r(l.current_patient_name),1)])])):v("",!0),l.current_patient_name?(n(),i("table",pe,[e("tr",me,[e("td",fe,r(s.__("Diagnosis")),1),e("td",he,[(n(!0),i(_,null,p(l.all_diagnosis,t=>(n(),i("ul",ge,[t.selected?(n(),i("li",ye,r(t.name),1)):v("",!0)]))),256))])]),e("tr",be,[e("td",ve,r(s.__("Drugs")),1),e("td",xe,[(n(!0),i(_,null,p(l.form.prescriptionLines,(t,c)=>(n(),i("ul",null,[e("li",ke,[e("div",we,[e("span",Ce,r(t.name),1),e("i",{class:"fa fa-delete-left cursor-pointer text-red-500",onClick:b=>d.deleteItem(c)},null,8,De)]),e("div",Ae,[g(e("input",{list:"doses",id:"dose","onUpdate:modelValue":b=>t.dose=b,placeholder:"dose",class:"border w-3/5 pl-2"},null,8,Se),[[C,t.dose]]),e("datalist",Ve,[(n(!0),i(_,null,p(l.doses,b=>(n(),i("option",{value:b.name},null,8,je))),256))]),g(e("input",{type:"text","onUpdate:modelValue":b=>t.cost=b,placeholder:"cost",class:"w-2/5"},null,8,Ue),[[C,t.cost]])])])]))),256))])]),e("tr",Le,[e("td",Ne,r(s.__("Analysis")),1),e("td",Be,[(n(!0),i(_,null,p(l.form.analysis,t=>(n(),i("ul",Ie,[e("li",null,r(t),1)]))),256))])]),e("tr",Je,[e("td",Te,r(s.__("X-ray")),1),e("td",Xe,[(n(!0),i(_,null,p(l.form.rays,t=>(n(),i("ul",Me,[e("li",null,r(t),1)]))),256))])]),e("tr",Pe,[e("td",Re,r(s.__("Notes")),1),e("td",Fe,r(l.form.notes),1)])])):(n(),i("div",He,[e("p",Oe,[We,h(" "+r(s.__("Please select a patient")),1)])])),l.current_patient_name?(n(),i("div",ze,[e("div",Ee,[a(I,{onClick:o[6]||(o[6]=t=>d.onCancel())},{default:u(()=>[h(r(s.__("Cancel")),1)]),_:1}),a(y,{class:"ms-2",onClick:o[7]||(o[7]=t=>d.onSave())},{default:u(()=>[h(r(s.__("Save")),1)]),_:1})])])):v("",!0)],512),[[S,l.tab_idx==1]]),g(e("div",qe,[e("div",null,[l.current_patient_name?(n(),i("div",Ge,[g(e("input",{class:"text-center p-2 font-bold bg-[#f8f9fa] w-full","onUpdate:modelValue":o[8]||(o[8]=t=>l.current_patient_name=t)},null,512),[[C,l.current_patient_name]])])):v("",!0),l.patient_history.length>0?(n(),i("div",Ke,[e("table",Qe,[e("thead",Ye,[e("th",Ze,r(s.__("Date")),1),e("th",$e,r(s.__("Diagnosis")),1),et]),e("tbody",null,[(n(!0),i(_,null,p(l.patient_history,t=>(n(),i("tr",{key:t.id,class:"border border-[#eceeef]"},[e("td",tt,r(new Date(t.created_at).toLocaleDateString()),1),e("td",st,[e("ul",ot,[(n(!0),i(_,null,p(JSON.parse(t.diagnosis),c=>(n(),i("li",null,r(c),1))),256))])]),e("td",lt,[a(J,{onClick:c=>d.openDlg(t)},{default:u(()=>[nt]),_:2},1032,["onClick"])])]))),128))])])])):(n(),i("div",it,[e("p",rt,[at,h(" "+r(s.__("No Records Were Found")),1)])]))])],512),[[S,l.tab_idx==2]])])]),e("div",dt,[e("div",ct,[a(k,{value:s.__("Diagnosis")},null,8,["value"]),e("span",ut,r(s.__("(you can choose multiple options)")),1),e("div",_t,[(n(!0),i(_,null,p(l.all_diagnosis,t=>(n(),i("button",{key:t.id,class:"my-4 mx-2"},[g(e("input",{type:"checkbox",class:"peer sr-only",id:t.name,name:"diagnosis",value:t.name,"onUpdate:modelValue":c=>t.selected=c,onChange:c=>d.getDrugs(t)},null,40,pt),[[D,t.selected]]),e("label",{for:t.name,class:"cursor-pointer p-2 rounded-md text-center text-sm border shadow peer-checked:bg-green-500"},r(t.name),9,mt)]))),128))])]),e("div",null,[a(k,{value:s.__("Drug")},null,8,["value"]),e("span",ft,r(s.__("(you can choose multiple options)")),1),e("div",ht,[l.temp_drugs.length!=0?(n(),i("div",gt,[(n(!0),i(_,null,p(l.temp_drugs,(t,c)=>(n(),i("button",yt,[g(e("input",{type:"checkbox",class:"peer sr-only",id:t.name,name:"drug",value:{drg:t,dose:null,cost:null},"onUpdate:modelValue":o[9]||(o[9]=b=>l.checkedDrugs=b),onChange:b=>d.check(t)},null,40,bt),[[D,l.checkedDrugs]]),e("label",{for:t.name,class:"cursor-pointer p-2 text-sm rounded-md text-center border shadow peer-checked:bg-green-500"},r(t.name),9,vt)]))),256))])):v("",!0)]),e("div",xt,[a(k,{value:s.__("Analysis")},null,8,["value"]),e("span",kt,r(s.__("(you can choose multiple options)")),1),l.analysis?(n(),i("div",wt,[(n(!0),i(_,null,p(l.all_analysis,t=>(n(),i("button",{key:t.id,class:"my-4 mx-2"},[g(e("input",{type:"checkbox",class:"peer sr-only",id:t.name,name:"analysis",value:t.name,"onUpdate:modelValue":c=>l.form.analysis=c},null,8,Ct),[[D,l.form.analysis]]),e("label",{for:t.name,class:"cursor-pointer p-2 rounded-md text-sm text-center border shadow peer-checked:bg-green-500"},r(t.name),9,Dt)]))),128))])):v("",!0),e("div",At,[a(y,{class:"ms-2",onClick:o[10]||(o[10]=t=>d.AddNewAnalysis())},{default:u(()=>[St]),_:1}),a(y,{class:"ms-2",onClick:o[11]||(o[11]=t=>d.AddAnalysis())},{default:u(()=>[h(r(s.__("Add")),1)]),_:1})])]),e("div",Vt,[a(k,{value:s.__("X-ray")},null,8,["value"]),e("span",jt,r(s.__("(you can choose multiple options)")),1),l.rays?(n(),i("div",Ut,[(n(!0),i(_,null,p(l.all_rays,t=>(n(),i("button",{key:t.id,class:"my-4 mx-2"},[g(e("input",{type:"checkbox",class:"peer sr-only",id:t.name,name:"rays",value:t.name,"onUpdate:modelValue":c=>l.form.rays=c},null,8,Lt),[[D,l.form.rays]]),e("label",{for:t.name,class:"cursor-pointer p-2 rounded-md text-sm text-center border shadow peer-checked:bg-green-500"},r(t.name),9,Nt)]))),128))])):v("",!0),e("div",Bt,[a(y,{class:"ms-2",onClick:o[12]||(o[12]=t=>d.AddNewXray())},{default:u(()=>[It]),_:1}),a(y,{class:"ms-2",onClick:o[13]||(o[13]=t=>d.AddRays())},{default:u(()=>[h(r(s.__("Add")),1)]),_:1})])]),e("div",Jt,[a(k,{value:s.__("Notes"),class:"my-1"},null,8,["value"]),e("div",Tt,[g(e("input",{"onUpdate:modelValue":o[14]||(o[14]=t=>l.form.notes=t),type:"text",class:"w-full border border-gray-300 rounded"},null,512),[[C,l.form.notes]])])])])])])])])]),_:1})}const Fs=Q(Y,[["render",Xt]]);export{Fs as default};
