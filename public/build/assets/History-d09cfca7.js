import{c as D,w as l,r as _,o as i,b as c,a as e,t as s,f as p,i as g,v as y,d as n,g as u,F as h}from"./app-150d5054.js";import{A as F}from"./AppLayout-f49bf28b.js";import{J as S}from"./Label-df30c280.js";import{J as k}from"./Button-4bcf952d.js";import{J as P}from"./SecondaryButton-713ac718.js";import{J}from"./DangerButton-8bc4ac7b.js";import{T as C}from"./TextField-3250345e.js";import{M as N}from"./vue3-multiselect.umd.min-0e68115f.js";import B from"./EditLine-0ace7ad9.js";import T from"./Show-2c593934.js";/* empty css                                                                  */import{_ as L}from"./_plugin-vue_export-helper-c27b6911.js";/* empty css            */import"./Edit-bcfc13f2.js";import"./ActionMessage-61e2ac70.js";import"./ActionSection-b2837b81.js";import"./SectionTitle-3e354ea0.js";import"./ConfirmationModal-25a9f4bd.js";import"./Modal-af9a88ec.js";import"./DialogModal-abac778c.js";import"./FormSection-88b4b82e.js";import"./Input-1c19b971.js";import"./Checkbox-4a56b901.js";import"./InputError-a5d97e62.js";import"./SectionBorder-e50f0f2f.js";import"./ValidationErrors-d148bef4.js";import"./Edit-0682400b.js";import"./Edit-3c089fa6.js";import"./Edit-be99b5ee.js";import"./Edit-597f2255.js";import"./Edit-f9922137.js";import"./Edit-faa18d1d.js";import"./Edit-cd91fcb4.js";import"./Edit-07cd30d2.js";import"./Edit-34545e2b.js";import"./Edit-db4f3217.js";import"./Load-49470aa5.js";import"./Load-63f267b7.js";import"./Edit-ae599c19.js";import"./Upload-84ea7cbc.js";import"./Upload-9f5fa312.js";import"./Settings-16afee17.js";import"./Settings-c1b5727e.js";import"./Upload-ac8dd442.js";import"./Request-7a72620a.js";import"./Add-a5bec431.js";import"./Load-9cedd89f.js";import"./Upload-8acddc09.js";import"./Load-38871443.js";import"./sweetalert.min-d55a1c1c.js";import"./ItemsMap-522638f4.js";import"./Upload-92e0933c.js";import"./ItemsMap-e43ca060.js";import"./RequestEx-92427893.js";const R={components:{AppLayout:F,JetLabel:S,JetButton:k,JetSecondaryButton:P,JetDangerButton:J,DialogInvoiceLine:B,TextField:C,Multiselect:N,ShowPrescription:T},props:{payments:{default:null},prescriptions:{default:null}},data(){return{tab_idx:1,errors:[],prescription_details:"",totalServiceFees:0}},methods:{openDlg(o){this.prescription_details=o,this.$nextTick(()=>this.$refs.dlg1.ShowDialog())},getPaidServiceFees(o){return o.appointment.payment.service_fees?o.appointment.payment.service_fees:"Not Paid"},getTotalServiceFees(o){var r=0;return o.prescription_items.forEach(m=>{m.service_fees!==null&&(r+=Number(m.service_fees))}),this.totalServiceFees=r,r},getRemainingOfServiceFees(o){if(this.totalServiceFees!=0&&o.appointment.payment.service_fees!==null){var r=o.appointment.payment.service_fees;return this.totalServiceFees-Number(r)}else if(o.appointment.payment.service_fees==null)return this.totalServiceFees},downloadPDF(o){window.open(route("pdf.payment.preview",[o.id]))},downloadPrescriptionPDF(o){window.open(route("pdf.prescription.preview",[o.id]))}},created:function(){console.log("prescriptions",this.prescriptions),console.log("payments",this.payments)}},A={class:"py-4"},O={class:"mx-auto sm:px-6 lg:px-8"},V={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg px-4 pb-4 pt-0"},j={class:"my-4 font-bold"},E={class:"flex items-center ms-0 mb-4 border-b border-gray-200"},I={class:"overflow"},M={class:"w-full"},H=e("tr",null,[e("th",{class:"bg-[#f8f9fa] p-3 border border-[#eceeef]"},"Date"),e("th",{class:"bg-[#f8f9fa] p-3 border border-[#eceeef]"},"Detection Type"),e("th",{class:"bg-[#f8f9fa] p-3 border border-[#eceeef]"},"Payment Status"),e("th",{class:"bg-[#f8f9fa] p-3 border border-[#eceeef]"},"detection fees"),e("th",{class:"bg-[#f8f9fa] p-3 border border-[#eceeef]"},"Total service fees"),e("th",{class:"bg-[#f8f9fa] p-3 border border-[#eceeef]"},"paid service fees"),e("th",{class:"bg-[#f8f9fa] p-3 border border-[#eceeef]"},"remains"),e("th",{class:"bg-[#f8f9fa] p-3 border border-[#eceeef]"},"Actions")],-1),W={class:"text-center border py-2"},q={class:"text-center border py-2"},z={class:"text-center border py-2"},G={class:"text-center border py-2"},K={class:"text-center border py-2"},Q={class:"text-center border py-2"},U={class:"text-center border py-2"},X={class:"text-center border py-2"},Y={class:"overflow"},Z={key:0,class:"w-full"},$=e("tr",null,[e("th",{class:"bg-[#f8f9fa] p-3 border border-[#eceeef]"},"Date"),e("th",{class:"bg-[#f8f9fa] p-3 border border-[#eceeef]"},"Doctor"),e("th",{class:"bg-[#f8f9fa] p-3 border border-[#eceeef]"},"Diagnose"),e("th",{class:"bg-[#f8f9fa] p-3 border border-[#eceeef]"},"Actions")],-1),ee={class:"text-center border py-2"},te={class:"text-center border py-2"},oe={class:"text-center border py-2"},se={class:"list-disc list-inside"},re={class:"text-center border py-2"},ie={key:1},ne={class:"text-center text-red-600"},ae=e("i",{class:"fa fa-exclamation-circle mr-1"},null,-1);function de(o,r,m,le,a,d){const x=_("show-prescription"),v=_("jet-button"),b=_("JetButton"),w=_("app-layout");return i(),D(w,null,{default:l(()=>[c(x,{ref:"dlg1",prescription:a.prescription_details},null,8,["prescription"]),e("div",A,[e("div",O,[e("div",V,[e("div",j,[e("h2",null,s(this.prescriptions[0].patient.name),1)]),e("div",E,[c(v,{onClick:r[0]||(r[0]=t=>a.tab_idx=1),disabled:a.tab_idx==1,isRounded:!1},{default:l(()=>[p(s(o.__("Payments")),1)]),_:1},8,["disabled"]),c(v,{onClick:r[1]||(r[1]=t=>a.tab_idx=2),disabled:a.tab_idx==2,isRounded:!1},{default:l(()=>[p(s(o.__("Prescriptions")),1)]),_:1},8,["disabled"])]),g(e("div",I,[e("table",M,[H,(i(!0),n(h,null,u(m.prescriptions,t=>(i(),n("tr",{key:t.id},[e("td",W,s(new Date(t.appointment.date).toLocaleDateString()),1),e("td",q,s(t.appointment.type),1),e("td",z,s(t.appointment.status),1),e("td",G,s(t.appointment.amount),1),e("td",K,s(t.appointment.payment!==null?d.getTotalServiceFees(t):"Not Found"),1),e("td",Q,[e("span",null,s(t.appointment.payment!==null?d.getPaidServiceFees(t):"Not Paid"),1)]),e("td",U,s(t.appointment.payment!==null?d.getRemainingOfServiceFees(t):"0"),1),e("td",X,[c(b,{onClick:f=>d.downloadPDF(t)},{default:l(()=>[p(" PDF ")]),_:2},1032,["onClick"])])]))),128))])],512),[[y,a.tab_idx==1]]),g(e("div",Y,[this.prescriptions.length!==0?(i(),n("table",Z,[$,(i(!0),n(h,null,u(m.prescriptions,t=>(i(),n("tr",{key:t.id},[e("td",ee,s(new Date(t.dateTimeIssued).toLocaleDateString()),1),e("td",te,s(t.doctor.name),1),e("td",oe,[(i(!0),n(h,null,u(JSON.parse(t.diagnosis),f=>(i(),n("ul",se,[e("li",null,s(f),1)]))),256))]),e("td",re,[c(b,{onClick:f=>d.downloadPrescriptionPDF(t)},{default:l(()=>[p("Print")]),_:2},1032,["onClick"]),c(b,{onClick:f=>d.openDlg(t)},{default:l(()=>[p("Show")]),_:2},1032,["onClick"])])]))),128))])):(i(),n("div",ie,[e("p",ne,[ae,p(" "+s(o.__("No Records Were Found")),1)])]))],512),[[y,a.tab_idx==2]])])])])]),_:1})}const ct=L(R,[["render",de]]);export{ct as default};
