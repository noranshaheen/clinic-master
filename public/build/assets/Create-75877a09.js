import{k as _,c as A,w as u,r as c,o as a,b as r,a as e,t as l,i as y,C as V,d as m,g as f,F as h,f as p}from"./app-98cccb0d.js";import{A as N}from"./AppLayout-336b7499.js";import{J as S}from"./Label-c6c7e0c2.js";import{J as x}from"./Button-fce1e67a.js";import{J}from"./SecondaryButton-fb7ef34d.js";import{J as B}from"./DangerButton-bf3f8f1f.js";import{T as P}from"./TextField-4dc08153.js";import{M as q}from"./vue3-multiselect.umd.min-89fe1e95.js";import E from"./EditLine-64c486c6.js";import F from"./Edit-470aa9e5.js";import{J as M}from"./ValidationErrors-ce3c07bd.js";/* empty css                                                                  */import{_ as W}from"./_plugin-vue_export-helper-c27b6911.js";/* empty css            */import"./Edit-7ca2eef9.js";import"./ActionMessage-529841b6.js";import"./ActionSection-14bbef3c.js";import"./SectionTitle-f26ec90c.js";import"./ConfirmationModal-2d2586d4.js";import"./Modal-2ccc6cf7.js";import"./DialogModal-9cb7d35f.js";import"./FormSection-60b88c5f.js";import"./Input-9c9fd5b2.js";import"./Checkbox-7ff4e1d6.js";import"./InputError-48880b4d.js";import"./SectionBorder-a45d0249.js";import"./Edit-cfad98b4.js";import"./Edit-04381c68.js";import"./Edit-c883850a.js";import"./Edit-663be45d.js";import"./Edit-833659c9.js";import"./Edit-e905c401.js";import"./Edit-fb9e1a40.js";import"./Edit-8b049cff.js";import"./Edit-7210d6e2.js";import"./Edit-9520adfe.js";import"./Load-c81154ca.js";import"./Load-269b27e0.js";import"./Edit-ae0efa3b.js";import"./Upload-3f7847e9.js";import"./Upload-cab6aca1.js";import"./Upload-4bb109cf.js";import"./Upload-91640e3b.js";import"./Settings-281c0c2c.js";import"./Settings-3a181d36.js";import"./Upload-b3182070.js";import"./Request-264efc19.js";import"./Add-983c5f77.js";import"./Load-b9d12279.js";import"./Upload-0c9409a0.js";import"./Load-c588859c.js";import"./sweetalert.min-9f604034.js";import"./ItemsMap-ac429fa2.js";import"./Upload-69a7afe4.js";import"./ItemsMap-99c5c9fb.js";import"./RequestEx-4f93fb5e.js";const O={components:{AppLayout:N,NewItemDialog:F,JetLabel:S,JetButton:x,JetSecondaryButton:J,JetDangerButton:B,DialogInvoiceLine:E,TextField:P,Multiselect:q,JetValidationErrors:M},props:{},data(){return{item:"",idx:"",doctors:[],clinics:[],items:[],units:[],warehouses:[],errors:[],form:this.$inertia.form({billLines:[],doctor:"",clinic_id:"",date:"",warehouse:"",stock:"",billTotalAmount:0})}},methods:{getWarehouses(t){_.get(route("inventory.all",t)).then(s=>{this.warehouses=s.data})},AddItem:function(){this.form.billLines.push({item:"",unit:"",unitPrice:"",quantity:0,total:0})},addNewItemDialog(){this.$refs.dlg1.ShowDialog()},addNewILineDialog(){this.$nextTick(()=>{this.$refs.dlg2.ShowDialog()})},editLineDialog(t){this.item=JSON.parse(JSON.stringify(this.form.billLines[t])),this.idx=t,this.$nextTick(()=>{this.$refs.dlg3.ShowDialog()})},onAddLine(t){this.form.billLines.push({item:t.item,unit:t.unit,unitPrice:t.unitPrice,quantity:t.quantity,total:t.total})},onEditLine(t,s){this.form.billLines[s]=t,console.log(this.form.billLines)},deleteLine:function(t){this.form.billLines.splice(t,1)},onCancel:function(){window.location.reload()},totalAmount(){var t=0;if(this.form.billLines.length!=0)return this.form.billLines.forEach(s=>{t+=Number(s.total)}),this.form.billTotalAmount=t,t},onSave:function(){_.post(route("bills.purchase.store"),this.form).then(t=>{this.processing=!1,this.$nextTick(()=>this.$emit("dataUpdated")),this.form.reset(),this.form.processing=!1,this.tab_idx=1}).catch(t=>{this.form.processing=!1,this.$page.props.errors=t.response.data.errors})}},created:function(){_.get(route("doctor.all")).then(s=>{this.doctors=s.data}),_.get(route("clinic.all")).then(s=>{this.clinics=s.data}),_.get(route("items.index")).then(s=>{var k=s.data;this.items=k.filter(C=>C.storable==1)}),_.get("/json/UnitTypes.json").then(s=>{this.units=s.data}).catch(s=>{})}},Q={class:"lg:py-4"},z={class:"mx-auto sm:px-6 lg:px-8"},G={class:"py-3 px-1"},H={class:"bg-white shadow-xl sm:rounded-lg px-4 pb-4 pt-0"},K={class:"grid lg:grid-cols-2 gap-4 sm:grid-cols-1 h-1/2"},R={class:""},X={class:""},Y=["value"],Z={class:""},$=["value"],ee={class:""},te=["value"],oe={class:"w-full"},se={class:"w-full"},le={class:"result my-5 w-full"},re={class:"w-full mx-auto md:hidden max-w-4xl lg:max-w-full"},ie={class:"text-center bg-gray-300"},ne={class:"bg-[#f8f9fa] p-1 border border-[#eceeef] w-3/12"},de=e("i",{class:"fa-solid fa-plus"},null,-1),ae=[de],me={class:"bg-[#f8f9fa] p-1 border border-[#eceeef]"},ce={class:"bg-[#f8f9fa] p-1 border border-[#eceeef]"},ue={class:"bg-[#f8f9fa] p-1 border border-[#eceeef]"},pe={class:"text-center border border-[#eceeef] w-5/12"},_e={class:"border border-[#eceeef]"},fe={class:"p-1 border border-[#eceeef]"},he={class:"p-1 border border-[#eceeef]"},be={class:"p-1 border border-[#eceeef]"},ge={class:"p-1 border border-[#eceeef]"},ve=e("i",{class:"fa fa-edit"},null,-1),we=e("i",{class:"fa fa-trash"},null,-1),ye={class:"mx-auto hidden md:block w-full"},Ve={class:"w-full text-center bg-gray-300"},ke={class:"bg-[#f8f9fa] p-1 border border-[#eceeef] w-3/12"},Ce=e("i",{class:"fa-solid fa-plus"},null,-1),De=[Ce],Te={class:"bg-[#f8f9fa] p-1 border border-[#eceeef] w-3/12"},Ue={class:"bg-[#f8f9fa] p-1 border border-[#eceeef]"},Ie={class:"bg-[#f8f9fa] p-1 border border-[#eceeef]"},Le={class:"bg-[#f8f9fa] p-1 border border-[#eceeef]"},je={class:"bg-[#f8f9fa] p-1 border border-[#eceeef]"},Ae={class:"w-full text-center border border-[#eceeef]"},Ne={class:"border border-[#eceeef]"},Se={class:"p-1 border border-[#eceeef]"},xe={class:"p-1 border border-[#eceeef]"},Je={class:"p-1 border border-[#eceeef]"},Be={class:"p-1 border border-[#eceeef]"},Pe={class:"p-1 border border-[#eceeef]"},qe={class:"p-1 border border-[#eceeef]"},Ee={class:"flex items-center justify-end mt-4"},Fe={class:"capitalize py-2 text-gray-600 text-lg font-bold"},Me={class:"flex items-center justify-end mt-20"};function We(t,s,k,C,i,d){const I=c("NewItemDialog"),L=c("jet-validation-errors"),b=c("TextField"),v=c("jet-label"),D=c("jet-secondary-button"),T=c("jet-danger-button"),U=c("multiselect"),w=c("jet-button"),j=c("app-layout");return a(),A(j,null,{default:u(()=>[r(I,{ref:"dlg1"},null,512),e("div",Q,[e("div",z,[r(L,{class:"mb-4"}),e("h2",G,l(t.__("Add Bill")),1),e("div",H,[e("div",K,[e("div",R,[r(b,{modelValue:i.form.date,"onUpdate:modelValue":s[0]||(s[0]=o=>i.form.date=o),itemType:"date",itemLabel:t.__("Date")},null,8,["modelValue","itemLabel"])]),e("div",X,[r(v,{value:t.__("Clinic")},null,8,["value"]),y(e("select",{"onUpdate:modelValue":s[1]||(s[1]=o=>i.form.clinic_id=o),class:"mt-1 w-full border-slate-300 rounded-md",onChange:s[2]||(s[2]=o=>d.getWarehouses(i.form.clinic_id))},[(a(!0),m(h,null,f(i.clinics,o=>(a(),m("option",{value:o.id,key:o.id},l(o.name),9,Y))),128))],544),[[V,i.form.clinic_id]])]),e("div",Z,[r(v,{value:t.__("Warehouses")},null,8,["value"]),y(e("select",{"onUpdate:modelValue":s[3]||(s[3]=o=>i.form.warehouse=o),class:"mt-1 w-full border-slate-300 rounded-md"},[(a(!0),m(h,null,f(i.warehouses,o=>(a(),m("option",{value:o,key:o.id},l(o.name),9,$))),128))],512),[[V,i.form.warehouse]])]),e("div",ee,[r(v,{value:t.__("Stock")},null,8,["value"]),y(e("select",{"onUpdate:modelValue":s[4]||(s[4]=o=>i.form.stock=o),class:"mt-1 w-full border-slate-300 rounded-md"},[(a(!0),m(h,null,f(i.form.warehouse.stocks,o=>(a(),m("option",{value:o,key:o.id},l(o.name),9,te))),128))],512),[[V,i.form.stock]])])]),e("div",oe,[e("div",se,[e("div",le,[e("table",re,[e("thead",ie,[e("th",ne,[p(l(t.__("Item"))+" ",1),e("button",{onClick:s[5]||(s[5]=o=>d.addNewItemDialog()),class:"cursor-pointer ml-4"},ae)]),e("th",me,l(t.__("Quantity")),1),e("th",ce,l(t.__("Total")),1),e("th",ue,l(t.__("Action")),1)]),e("tbody",pe,[(a(!0),m(h,null,f(i.form.billLines,(o,g)=>(a(),m("tr",_e,[e("td",fe,[e("p",null,l(o.item.name),1)]),e("td",he,[e("p",null,l(o.quantity),1)]),e("td",be,[e("p",null,l(o.total),1)]),e("td",ge,[e("div",null,[r(D,{class:"ms-2",onClick:n=>d.editLineDialog(g)},{default:u(()=>[ve]),_:2},1032,["onClick"]),r(T,{class:"ms-2",onClick:n=>d.deleteLine(g)},{default:u(()=>[we]),_:2},1032,["onClick"])])])]))),256))])]),e("table",ye,[e("thead",Ve,[e("th",ke,[p(l(t.__("Item"))+" ",1),e("button",{onClick:s[6]||(s[6]=o=>d.addNewItemDialog()),class:"cursor-pointer ml-4"},De)]),e("th",Te,l(t.__("Unit")),1),e("th",Ue,l(t.__("Unit Price")),1),e("th",Ie,l(t.__("Quantity")),1),e("th",Le,l(t.__("Total Price")),1),e("th",je,l(t.__("Action")),1)]),e("tbody",Ae,[(a(!0),m(h,null,f(i.form.billLines,(o,g)=>(a(),m("tr",Ne,[e("td",Se,[r(U,{modelValue:o.item,"onUpdate:modelValue":n=>o.item=n,label:"name",options:i.items,placeholder:"Select Item",searchable:!0},null,8,["modelValue","onUpdate:modelValue","options"])]),e("td",xe,[r(U,{modelValue:o.unit,"onUpdate:modelValue":n=>o.unit=n,options:i.units,label:"desc_en",placeholder:"unit",searchable:!0},null,8,["modelValue","onUpdate:modelValue","options"])]),e("td",Je,[r(b,{modelValue:o.unitPrice,"onUpdate:modelValue":n=>o.unitPrice=n,itemType:"number"},null,8,["modelValue","onUpdate:modelValue"])]),e("td",Be,[r(b,{modelValue:o.quantity,"onUpdate:modelValue":n=>o.quantity=n,itemType:"number"},null,8,["modelValue","onUpdate:modelValue"])]),e("td",Pe,[r(b,{modelValue:o.total,"onUpdate:modelValue":n=>o.total=n,itemType:"number"},null,8,["modelValue","onUpdate:modelValue"])]),e("td",qe,[r(T,{class:"ms-2",onClick:n=>d.deleteLine(g)},{default:u(()=>[p(l(t.__("Delete")),1)]),_:2},1032,["onClick"])])]))),256))])])]),e("div",Ee,[r(w,{class:"ms-2 md:hidden",onClick:s[7]||(s[7]=o=>d.addNewILineDialog())},{default:u(()=>[p(l(t.__("Add")),1)]),_:1}),r(w,{class:"ms-2 hidden md:inline-block",onClick:s[8]||(s[8]=o=>d.AddItem())},{default:u(()=>[p(l(t.__("Add")),1)]),_:1})]),e("h3",Fe,[p(l(t.__("Invoice Total")+" :")+" ",1),e("span",null,l(d.totalAmount()),1)])]),e("div",Me,[r(D,{onClick:s[9]||(s[9]=o=>d.onCancel())},{default:u(()=>[p(l(t.__("Cancel")),1)]),_:1}),r(w,{class:"ms-2",onClick:s[10]||(s[10]=o=>d.onSave())},{default:u(()=>[p(l(t.__("Save")),1)]),_:1})])])])])])]),_:1})}const zt=W(O,[["render",We]]);export{zt as default};
