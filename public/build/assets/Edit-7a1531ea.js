import{J as k}from"./ActionMessage-c078ab58.js";import{J as j}from"./ActionSection-503f6cc4.js";import{J as y}from"./Button-caddf70d.js";import{J as C}from"./ConfirmationModal-747d8d1a.js";import{J as S}from"./DangerButton-0ca7bbd2.js";import{J as D}from"./DialogModal-08c723b0.js";import{J as B}from"./FormSection-f05163be.js";import{J as E}from"./Input-2cb00575.js";import{J as I}from"./Checkbox-0b804630.js";import{J as M}from"./InputError-1ce94fe9.js";import{J as N}from"./Label-715dcd10.js";import{J as A}from"./SecondaryButton-3445fa1d.js";import{J as T}from"./SectionBorder-30338fa4.js";import{J as q}from"./ValidationErrors-deb0d81a.js";import{M as z}from"./vue3-multiselect.umd.min-7dc826ba.js";import{k as h,c as v,w as m,r as a,o as d,f as c,t as l,b as i,d as g,a as r,i as R,C as F,h as L,n as O,e as P}from"./app-5577a803.js";/* empty css                                                                  */import{_ as Y}from"./_plugin-vue_export-helper-c27b6911.js";import"./SectionTitle-75c86d6b.js";import"./Modal-5b92d53d.js";/* empty css            */const G={components:{JetActionMessage:k,JetActionSection:j,JetButton:y,JetConfirmationModal:C,JetDangerButton:S,JetDialogModal:D,JetFormSection:B,JetInput:E,JetCheckbox:I,JetInputError:M,JetLabel:N,JetSecondaryButton:A,JetSectionBorder:T,JetValidationErrors:q,Multiselect:z},props:{pUser:{Type:Object,default:null}},data(){return{branches:[],customers:[],issuers:[],errors:[],form:this.$inertia.form({name:"",email:"",password:"",issuers:[]}),showDialog:!1}},methods:{ShowDialog(){if(this.issuers=[],this.pUser!==null){this.form.name=this.pUser.name,this.form.email=this.pUser.email,this.form.current_team_id=this.pUser.current_team_id;for(var e=0;e<this.pUser.issuers.length;e++)this.issuers.push(this.branches.find(s=>s.Id===this.pUser.issuers[e].Id))}this.showDialog=!0},CancelAddUser(){this.showDialog=!1},SaveUser(){this.form.issuers=[];for(var e=0;e<this.issuers.length;e++)this.form.issuers.push(this.issuers[e].Id);h.put(route("users.update",{user:this.pUser.id}),this.form).then(s=>{location.reload()}).catch(s=>{this.form.processing=!1,this.$page.props.errors=s.response.data.errors,this.errors=s.response.data.errors})},SaveNewUser(){this.form.issuers=[];for(var e=0;e<this.issuers.length;e++)this.form.issuers.push(this.issuers[e].Id);h.post(route("users.store"),this.form).then(s=>{this.processing=!1,this.$nextTick(()=>this.$emit("dataUpdated")),this.form.reset(),this.form.processing=!1,this.showDialog=!1,location.reload()}).catch(s=>{this.form.processing=!1,this.$page.props.errors=s.response.data.errors,this.errors=s.response.data.errors})},submit(){this.pUser==null?this.SaveNewUser():this.SaveUser()}},created:function(){h.get(route("json.branches")).then(s=>{if(this.branches=s.data,this.pUser)for(var u=0;u<this.pUser.issuers.length;u++)this.issuers.push(this.branches.find(_=>_.Id===this.pUser.issuers[u].Id))}).catch(s=>{})}},H={class:"grid grid-cols-2 gap-4"},K={value:"1"},Q={value:"2"},W={value:"3"},X={value:"4"},Z={value:"5"},x={class:"col-span-2"},$={key:1},ee={class:"flex items-center justify-end mt-4"};function se(e,s,u,_,o,p){const b=a("jet-validation-errors"),n=a("jet-label"),f=a("jet-input"),w=a("multiselect"),J=a("jet-secondary-button"),U=a("jet-button"),V=a("jet-dialog-modal");return d(),v(V,{show:o.showDialog,"max-width":"lg",onClose:s[7]||(s[7]=t=>o.showDialog=!1)},{title:m(()=>[c(l(e.__("User Information")),1)]),content:m(()=>[i(b,{class:"mb-4"}),e.$page.props.auth.user.is_reseptionist?(d(),g("form",{key:0,onSubmit:s[5]||(s[5]=L((...t)=>p.submit&&p.submit(...t),["prevent"]))},[r("div",H,[r("div",null,[i(n,{for:"name",value:e.__("Name")},null,8,["value"]),i(f,{id:"name",type:"text",class:"mt-1 block w-full",modelValue:o.form.name,"onUpdate:modelValue":s[0]||(s[0]=t=>o.form.name=t),required:"",autofocus:""},null,8,["modelValue"])]),r("div",null,[i(n,{for:"Email",value:e.__("Email")},null,8,["value"]),i(f,{id:"Email",type:"Email",class:"mt-1 block w-full",modelValue:o.form.email,"onUpdate:modelValue":s[1]||(s[1]=t=>o.form.email=t),required:""},null,8,["modelValue"])]),r("div",null,[i(n,{for:"password",value:e.__("Password")},null,8,["value"]),i(f,{id:"password",type:"password",class:"mt-1 block w-full",modelValue:o.form.password,"onUpdate:modelValue":s[2]||(s[2]=t=>o.form.password=t),required:""},null,8,["modelValue"])]),r("div",null,[i(n,{value:e.__("Role")},null,8,["value"]),R(r("select",{id:"type","onUpdate:modelValue":s[3]||(s[3]=t=>o.form.current_team_id=t),class:"mt-1 block w-full"},[r("option",K,l(e.__("Administrator")),1),r("option",Q,l(e.__("Reviewer")),1),r("option",W,l(e.__("Data Entry")),1),r("option",X,l(e.__("ETA")),1),r("option",Z,l(e.__("Viewer")),1)],512),[[F,o.form.current_team_id]])]),r("div",x,[i(n,{value:e.__("Branches")},null,8,["value"]),i(w,{modelValue:o.issuers,"onUpdate:modelValue":s[4]||(s[4]=t=>o.issuers=t),options:o.branches,label:"name",placeholder:e.__("Select Branches"),multiple:!0},null,8,["modelValue","options","placeholder"])])])],32)):(d(),g("div",$,l(e.__("You are not authorized to add/edit users")),1))]),footer:m(()=>[r("div",ee,[i(J,{onClick:s[6]||(s[6]=t=>p.CancelAddUser())},{default:m(()=>[c(l(e.__("Cancel")),1)]),_:1}),e.$page.props.auth.user.is_reseptionist?(d(),v(U,{key:0,class:O(["ms-2",{"opacity-25":o.form.processing}]),onClick:p.submit,disabled:o.form.processing},{default:m(()=>[c(l(e.__("Save")),1)]),_:1},8,["onClick","class","disabled"])):P("",!0)])]),_:1},8,["show"])}const Ve=Y(G,[["render",se]]);export{Ve as default};
