import{J as S}from"./ActionMessage-517545cc.js";import{J as j}from"./ActionSection-2c866042.js";import{J as A}from"./Button-11813b5e.js";import{J as U}from"./ConfirmationModal-0f300aca.js";import{J as B}from"./DangerButton-367e534b.js";import{J as M}from"./DialogModal-22356253.js";import{J as T}from"./FormSection-bd296fee.js";import{J as F}from"./Input-8a286b7b.js";import{J as R}from"./Checkbox-ebdeef89.js";import{J as E}from"./InputError-317c03cf.js";import{J as N}from"./Label-e291ccc6.js";import{J as q}from"./SecondaryButton-8a1eaf86.js";import{J as x}from"./SectionBorder-822e764c.js";import{J as I}from"./ValidationErrors-31471297.js";import{M as L}from"./vue3-multiselect.umd.min-939aa207.js";import{T as O}from"./TextField-f89d8302.js";import{k as f,c as z,w as c,r as p,o as n,f as _,t as r,b as t,a as s,i as b,C as w,d as m,g,F as v,n as W}from"./app-010fad37.js";import{_ as G}from"./_plugin-vue_export-helper-c27b6911.js";import"./SectionTitle-8abeab5a.js";import"./Modal-97755a3c.js";/* empty css            */const H={components:{JetActionMessage:S,JetActionSection:j,JetButton:A,JetConfirmationModal:U,JetDangerButton:B,JetDialogModal:M,JetFormSection:T,JetInput:F,JetCheckbox:R,JetInputError:E,JetLabel:N,JetSecondaryButton:q,JetSectionBorder:x,JetValidationErrors:I,Multiselect:L,TextField:O},props:{appointment:{type:Object,default:null}},data(){return{errors:[],form:this.$inertia.form({doctor_id:"",clinic_id:"",records:[]}),allrooms:[],availableRooms:[],clinics:[],doctors:[],showDialog:!1}},methods:{ShowDialog(){this.appointment!=null&&(this.form.doctor_id=this.appointment.doctor_id,this.form.records.room_id=this.appointment.room_id,this.form.records.date=new Date(this.appointment.date).toISOString(),this.form.records.from=new Date(this.appointment.from).toLocaleTimeString(),this.form.records.to=new Date(this.appointment.to).toLocaleTimeString()),this.showDialog=!0},CancelDlg(){this.showDialog=!1},updateAvailableRooms(e){this.availableRooms=this.allrooms.filter(i=>i.clinic_id==e),console.log(e),console.log(this.availableRooms)},SaveNewAppointment(){f.post(route("appointments.store"),this.form).then(e=>{this.$store.dispatch("setSuccessFlashMessage",!0),this.processing=!1,this.form.reset(),this.form.processing=!1,this.showDialog=!1,setTimeout(()=>{window.location.reload()},500)}).catch(e=>{this.form.processing=!1,this.$page.props.errors=e.response.data.errors,this.errors=e.response.data.errors})},SaveAppointment(){f.put(route("appointments.store",{appointment:this.appointment.id}),this.form).then(e=>{this.$store.dispatch("setSuccessFlashMessage",!0),this.processing=!1,this.form.reset(),this.form.processing=!1,this.showDialog=!1,setTimeout(()=>{window.location.reload()},500)}).catch(e=>{this.form.processing=!1,this.$page.props.errors=e.response.data.errors,this.errors=e.response.data.errors})},submit(){this.appointment==null?this.SaveNewAppointment():this.SaveAppointment()},addBalance(){this.form.records.push({date:new Date().toISOString().slice(0,10),from:"",to:"",room_id:"",num_of_cases:0})},deleteEntry(e){this.form.records.splice(e,1)}},created(){this.addBalance(),f.get(route("doctor.all")).then(e=>{this.doctors=e.data}),f.get(route("clinic.all")).then(e=>{this.clinics=e.data}),f.get(route("room.all")).then(e=>{this.allrooms=e.data})}},K={class:"grid grid-cols-1"},P={class:"grid grid-cols-2 gap-3"},Q={class:"col-span-1"},X=["value"],Y={class:"col-span-1"},Z=["value"],$={class:"col-span-1"},ee={class:"col-span-1"},oe={class:"col-span-1"},te={class:"col-span-1"},se={class:"col-span-1"},le=["onUpdate:modelValue"],ae=["value"],ie={class:"col-span-1 flex justify-end"},ne={class:"col-span-1 w-1/5 my-2 mx-auto"},re={class:"flex items-center justify-end"};function me(e,i,de,ce,l,u){const V=p("jet-validation-errors"),d=p("jet-label"),h=p("jet-input"),D=p("jet-danger-button"),J=p("jet-button"),y=p("jet-secondary-button"),C=p("jet-dialog-modal");return n(),z(C,{show:l.showDialog,maxWidth:"5xl",onClose:i[4]||(i[4]=o=>l.showDialog=!1)},{title:c(()=>[_(r(e.__("Add An Appointment Dialog")),1)]),content:c(()=>[t(V,{class:"mb-4"}),s("div",K,[s("div",P,[s("div",Q,[t(d,{value:e.__("Doctor")},null,8,["value"]),b(s("select",{"onUpdate:modelValue":i[0]||(i[0]=o=>l.form.doctor_id=o),class:"mt-1 block w-full border-slate-300 rounded-md"},[(n(!0),m(v,null,g(l.doctors,o=>(n(),m("option",{value:o.id,key:o.id},r(o.name),9,X))),128))],512),[[w,l.form.doctor_id]])]),s("div",Y,[t(d,{value:e.__("Clinic")},null,8,["value"]),b(s("select",{"onUpdate:modelValue":i[1]||(i[1]=o=>l.form.clinic_id=o),class:"mt-1 block w-full border-slate-300 rounded-md",onChange:i[2]||(i[2]=o=>u.updateAvailableRooms(l.form.clinic_id))},[(n(!0),m(v,null,g(l.clinics,o=>(n(),m("option",{value:o.id,key:o.id},r(o.name),9,Z))),128))],544),[[w,l.form.clinic_id]])]),(n(!0),m(v,null,g(l.form.records,(o,k)=>(n(),m("div",{key:k,class:"bg-gray-200 grid grid-cols-6 gap-3 col-span-2 p-2"},[s("div",$,[t(d,{value:e.__("Date"),class:"mt-4"},null,8,["value"]),t(h,{type:"date",class:"mt-1 block w-full text-sm",modelValue:o.date,"onUpdate:modelValue":a=>o.date=a,required:""},null,8,["modelValue","onUpdate:modelValue"])]),s("div",ee,[t(d,{value:e.__("From"),class:"mt-4"},null,8,["value"]),t(h,{type:"time",class:"mt-1 block w-full text-sm",modelValue:o.from,"onUpdate:modelValue":a=>o.from=a,required:""},null,8,["modelValue","onUpdate:modelValue"])]),s("div",oe,[t(d,{value:e.__("To"),class:"mt-4"},null,8,["value"]),t(h,{type:"time",class:"mt-1 block w-full text-sm",modelValue:o.to,"onUpdate:modelValue":a=>o.to=a,required:""},null,8,["modelValue","onUpdate:modelValue"])]),s("div",te,[t(d,{value:e.__("Number Of Cases"),class:"mt-4"},null,8,["value"]),t(h,{type:"number",min:"1",class:"mt-1 block w-full text-sm",modelValue:o.num_of_cases,"onUpdate:modelValue":a=>o.num_of_cases=a,required:""},null,8,["modelValue","onUpdate:modelValue"])]),s("div",se,[t(d,{value:e.__("Room"),class:"mt-4"},null,8,["value"]),b(s("select",{required:"","onUpdate:modelValue":a=>o.room_id=a,class:"mt-1 block w-full border-slate-300 rounded-md text-sm"},[(n(!0),m(v,null,g(l.availableRooms,a=>(n(),m("option",{value:a.id,key:a.id},r(a.name),9,ae))),128))],8,le),[[w,o.room_id]])]),s("div",ie,[t(D,{onClick:a=>u.deleteEntry(k),class:"mt-8 block min-w-fit"},{default:c(()=>[_(r(e.__("Delete")),1)]),_:2},1032,["onClick"])])]))),128))]),s("div",ne,[t(J,{class:"ps-2 w-full mt-1",onClick:u.addBalance,disabled:l.form.processing},{default:c(()=>[_(r(e.__("Add An Appointment")),1)]),_:1},8,["onClick","disabled"])])])]),footer:c(()=>[s("div",re,[t(y,{onClick:i[3]||(i[3]=o=>u.CancelDlg())},{default:c(()=>[_(r(e.__("Cancel")),1)]),_:1}),t(J,{class:W(["ms-2",{"opacity-25":l.form.processing}]),onClick:u.submit,disabled:l.form.processing},{default:c(()=>[_(r(e.__("Save")),1)]),_:1},8,["onClick","class","disabled"])])]),_:1},8,["show"])}const Te=G(H,[["render",me]]);export{Te as default};
