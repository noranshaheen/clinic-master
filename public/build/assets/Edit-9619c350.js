import{J as j}from"./ActionMessage-61e2ac70.js";import{J as y}from"./ActionSection-b2837b81.js";import{J as D}from"./Button-4bcf952d.js";import{J as U}from"./ConfirmationModal-25a9f4bd.js";import{J as S}from"./DangerButton-8bc4ac7b.js";import{J as B}from"./DialogModal-abac778c.js";import{J as M}from"./FormSection-88b4b82e.js";import{J as A}from"./Input-1c19b971.js";import{J as I}from"./Checkbox-4a56b901.js";import{J as x}from"./InputError-a5d97e62.js";import{J as E}from"./Label-df30c280.js";import{J as T}from"./SecondaryButton-713ac718.js";import{J as F}from"./SectionBorder-e50f0f2f.js";import{J as P}from"./ValidationErrors-d148bef4.js";import{M as N}from"./vue3-multiselect.umd.min-0e68115f.js";import{T as W}from"./TextField-3250345e.js";import{_ as L}from"./_plugin-vue_export-helper-c27b6911.js";import{c as O,w as c,r as n,o as h,f as _,t as a,b as l,a as o,d as b,g as z,F as g,n as q}from"./app-150d5054.js";import"./SectionTitle-3e354ea0.js";import"./Modal-af9a88ec.js";/* empty css            */const G={components:{JetActionMessage:j,JetActionSection:y,JetButton:D,JetConfirmationModal:U,JetDangerButton:S,JetDialogModal:B,JetFormSection:M,JetInput:A,JetCheckbox:I,JetInputError:x,JetLabel:E,JetSecondaryButton:T,JetSectionBorder:F,JetValidationErrors:P,Multiselect:N,TextField:W},props:{accounting_item:{Type:Object,default:null}},data(){return{errors:[],form:this.$inertia.form({id:"",parent_id:"",name:"",description:"",visible_balance_sheet:!1,visible_income_sheet:!1,status:"Active",balance:[]}),editingMode:!1,parent_item:null,items:[],showDialog:!1}},methods:{ShowDialog(){this.editingMode=!!this.accounting_item,this.accounting_item!==null?(this.form.id=this.accounting_item.id,this.form.parent_id=this.accounting_item.parent?this.accounting_item.parent.id:null,this.form.name=this.accounting_item.name,this.form.description=this.accounting_item.description,this.form.visible_balance_sheet=this.accounting_item.visible_balance_sheet,this.form.visible_income_sheet=this.accounting_item.visible_income_sheet,this.form.transferable=this.accounting_item.transferable,this.form.status=this.accounting_item.status,this.form.balance=this.accounting_item.balance,this.form.balance.forEach((e,t)=>{this.form.balance[t].balance_date=e.balance_date.slice(0,10)})):this.form.balance=[],this.showDialog=!0,this.$nextTick(()=>{this.form.parent_id!=null&&this.items!=null?this.parent_item=this.items.find(e=>e.id===this.form.parent_id):this.parent_item=null,this.updateParentItem()})},CancelDlg(){this.showDialog=!1},submit(){this.editingMode||(this.form.status="Active"),axios.post(route("accounting.chart.store"),this.form).then(e=>{this.$store.dispatch("setSuccessFlashMessage",!0),this.processing=!1,this.form.reset(),this.form.processing=!1,this.showDialog=!1,setTimeout(()=>{window.location.reload()},500)}).catch(e=>{this.form.processing=!1,this.$page.props.errors=e.response.data.errors,this.errors=e.response.data.errors})},nameWithCode({id:e,name:t}){return e+" - "+t},updateParentItem(){this.parent_item?this.form.parent_id=this.parent_item.id:this.form.parent_id=null},addBalance(){this.form.balance.push({transferable:!0,balance_date:new Date().toISOString().slice(0,10),debit:0,credit:0})},deleteEntry(e){this.form.balance.splice(e,1)}},created(){axios.get(route("accounting.chart.json")).then(e=>{this.items=e.data,this.accounting_item!=null&&(this.parent_item=this.items.find(t=>t.id===this.form.parent_id),this.updateParentItem())}).catch(e=>{})}},H={class:"grid grid-cols-4 gap-4"},K={class:"col-span-1"},Q=o("div",{class:"col-span-1"},null,-1),R={class:"col-span-1"},X={class:"w-full flex"},Y={class:"m-auto"},Z={class:"w-full flex"},$={class:"col-span-1"},ee={class:"w-full flex"},te={class:"m-auto"},se={class:"w-full flex"},oe={class:"col-span-2"},ie={class:"col-span-2"},le={class:"col-span-4"},ae={class:"col-span-4 grid grid-cols-12 gap-0 bg-gray-200"},ne={class:"col-span-3 ms-2"},re={class:"col-span-3 ms-2"},ce={class:"col-span-3 ms-2"},me={class:"col-span-2 w-full flex"},de={class:"m-auto"},_e=o("div",{class:"col-span-1 ms-2"},null,-1),ue={class:"flex items-center justify-end"};function pe(e,t,he,fe,i,m){const v=n("jet-validation-errors"),u=n("jet-label"),d=n("jet-input"),p=n("jet-checkbox"),V=n("multiselect"),k=n("jet-danger-button"),f=n("jet-button"),J=n("jet-secondary-button"),w=n("jet-dialog-modal");return h(),O(w,{show:i.showDialog,maxWidth:"2xl",onClose:t[7]||(t[7]=s=>i.showDialog=!1)},{title:c(()=>[_(a(e.__("Accounting Chart Dialog")),1)]),content:c(()=>[l(v,{class:"mb-4"}),o("div",H,[o("div",K,[l(u,{value:e.__("Code")},null,8,["value"]),l(d,{id:"id",type:"text",class:"mt-1 block w-full disabled:bg-gray-400",modelValue:i.form.id,"onUpdate:modelValue":t[0]||(t[0]=s=>i.form.id=s),disabled:i.editingMode},null,8,["modelValue","disabled"])]),Q,o("div",R,[o("div",X,[o("span",Y,a(e.__("Balance Sheet")),1)]),o("div",Z,[l(p,{class:"mt-4 m-auto",name:"visible_balance_sheet",id:"visible_balance_sheet",checked:i.form.visible_balance_sheet,"onUpdate:checked":t[1]||(t[1]=s=>i.form.visible_balance_sheet=s)},null,8,["checked"])])]),o("div",$,[o("div",ee,[o("span",te,a(e.__("Income Statement")),1)]),o("div",se,[l(p,{class:"mt-4 m-auto",name:"visible_income_sheet",id:"visible_income_sheet",checked:i.form.visible_income_sheet,"onUpdate:checked":t[2]||(t[2]=s=>i.form.visible_income_sheet=s)},null,8,["checked"])])]),o("div",oe,[l(u,{value:e.__("Name")},null,8,["value"]),l(d,{id:"name",type:"text",class:"mt-1 block w-full",modelValue:i.form.name,"onUpdate:modelValue":t[3]||(t[3]=s=>i.form.name=s)},null,8,["modelValue"])]),o("div",ie,[l(u,{value:e.__("Parent Account")},null,8,["value"]),l(V,{modelValue:i.parent_item,"onUpdate:modelValue":[t[4]||(t[4]=s=>i.parent_item=s),m.updateParentItem],options:i.items,"custom-label":m.nameWithCode,label:"name","track-by":"id",placeholder:e.__("Select item")},null,8,["modelValue","options","custom-label","onUpdate:modelValue","placeholder"])]),o("div",le,[l(u,{value:e.__("Description")},null,8,["value"]),l(d,{id:"description",type:"text",class:"mt-1 block w-full",modelValue:i.form.description,"onUpdate:modelValue":t[5]||(t[5]=s=>i.form.description=s)},null,8,["modelValue"])]),o("div",ae,[o("div",ne,a(e.__("Date")),1),o("div",re,a(e.__("Debit Amount")),1),o("div",ce,a(e.__("Credit Amount")),1),o("div",me,[o("div",de,a(e.__("Transferable")),1)]),_e,(h(!0),b(g,null,z(i.form.balance,(s,C)=>(h(),b(g,null,[l(d,{type:"date",class:"col-span-3 mt-1",modelValue:s.balance_date,"onUpdate:modelValue":r=>s.balance_date=r},null,8,["modelValue","onUpdate:modelValue"]),l(d,{type:"number",class:"col-span-3 mt-1",modelValue:s.debit,"onUpdate:modelValue":r=>s.debit=r},null,8,["modelValue","onUpdate:modelValue"]),l(d,{type:"number",class:"col-span-3 mt-1",modelValue:s.credit,"onUpdate:modelValue":r=>s.credit=r},null,8,["modelValue","onUpdate:modelValue"]),l(p,{class:"col-span-2 m-auto",name:"transferable",id:"transferable",checked:s.transferable,"onUpdate:checked":r=>s.transferable=r},null,8,["checked","onUpdate:checked"]),l(k,{onClick:r=>m.deleteEntry(C),class:"mt-1"},{default:c(()=>[_(a(e.__("Delete")),1)]),_:2},1032,["onClick"])],64))),256)),l(f,{class:"ps-2 col-span-12 mt-1",onClick:m.addBalance,disabled:i.form.processing},{default:c(()=>[_(a(e.__("Add Balance")),1)]),_:1},8,["onClick","disabled"])])])]),footer:c(()=>[o("div",ue,[l(J,{onClick:t[6]||(t[6]=s=>m.CancelDlg())},{default:c(()=>[_(a(e.__("Cancel")),1)]),_:1}),l(f,{class:q(["ms-2",{"opacity-25":i.form.processing}]),onClick:m.submit,disabled:i.form.processing},{default:c(()=>[_(a(e.__("Save")),1)]),_:1},8,["onClick","class","disabled"])])]),_:1},8,["show"])}const Pe=L(G,[["render",pe]]);export{Pe as default};
