import{k as p,c as L,w as f,r as a,o as d,b as r,a as t,t as i,i as v,C as y,d as m,g as h,F as b,f as c}from"./app-98cccb0d.js";import{A as x}from"./AppLayout-336b7499.js";import{J as A}from"./Label-c6c7e0c2.js";import{J}from"./Button-fce1e67a.js";import{J as N}from"./SecondaryButton-fb7ef34d.js";import{J as B}from"./DangerButton-bf3f8f1f.js";import{T as P}from"./TextField-4dc08153.js";import{M as q}from"./vue3-multiselect.umd.min-89fe1e95.js";import E from"./EditLine-64c486c6.js";import F from"./Edit-470aa9e5.js";import{J as M}from"./ValidationErrors-ce3c07bd.js";/* empty css                                                                  */import{_ as W}from"./_plugin-vue_export-helper-c27b6911.js";/* empty css            */import"./Edit-7ca2eef9.js";import"./ActionMessage-529841b6.js";import"./ActionSection-14bbef3c.js";import"./SectionTitle-f26ec90c.js";import"./ConfirmationModal-2d2586d4.js";import"./Modal-2ccc6cf7.js";import"./DialogModal-9cb7d35f.js";import"./FormSection-60b88c5f.js";import"./Input-9c9fd5b2.js";import"./Checkbox-7ff4e1d6.js";import"./InputError-48880b4d.js";import"./SectionBorder-a45d0249.js";import"./Edit-cfad98b4.js";import"./Edit-04381c68.js";import"./Edit-c883850a.js";import"./Edit-663be45d.js";import"./Edit-833659c9.js";import"./Edit-e905c401.js";import"./Edit-fb9e1a40.js";import"./Edit-8b049cff.js";import"./Edit-7210d6e2.js";import"./Edit-9520adfe.js";import"./Load-c81154ca.js";import"./Load-269b27e0.js";import"./Edit-ae0efa3b.js";import"./Upload-3f7847e9.js";import"./Upload-cab6aca1.js";import"./Upload-4bb109cf.js";import"./Upload-91640e3b.js";import"./Settings-281c0c2c.js";import"./Settings-3a181d36.js";import"./Upload-b3182070.js";import"./Request-264efc19.js";import"./Add-983c5f77.js";import"./Load-b9d12279.js";import"./Upload-0c9409a0.js";import"./Load-c588859c.js";import"./sweetalert.min-9f604034.js";import"./ItemsMap-ac429fa2.js";import"./Upload-69a7afe4.js";import"./ItemsMap-99c5c9fb.js";import"./RequestEx-4f93fb5e.js";const O={components:{AppLayout:x,NewItemDialog:F,JetLabel:A,JetButton:J,JetSecondaryButton:N,JetDangerButton:B,DialogInvoiceLine:E,TextField:P,Multiselect:q,JetValidationErrors:M},props:{},data(){return{item:"",idx:"",warehouses:[],stocks:[],clinics:[],items:[],units:[],errors:[],form:this.$inertia.form({billLines:[],clinic_id:"",warehouse:"",stock:"",date:"",billTotalAmount:0})}},methods:{getWarehouses(e){p.get(route("inventory.all",e)).then(s=>{this.warehouses=s.data})},AddItem:function(){this.form.billLines.push({item:"",unit:"",unitPrice:"",quantity:0,total:0})},addNewItemDialog(){this.$refs.dlg1.ShowDialog()},addNewILineDialog(){this.$nextTick(()=>{this.$refs.dlg2.ShowDialog()})},editLineDialog(e){this.item=JSON.parse(JSON.stringify(this.form.billLines[e])),this.idx=e,this.$nextTick(()=>{this.$refs.dlg3.ShowDialog()})},onAddLine(e){this.form.billLines.push({item:e.item,unit:e.unit,unitPrice:e.unitPrice,quantity:e.quantity,total:e.total})},onEditLine(e,s){this.form.billLines[s]=e,console.log(this.form.billLines)},deleteLine:function(e){this.form.billLines.splice(e,1)},onCancel:function(){window.location.reload()},totalAmount(){var e=0;if(this.form.billLines.length!=0)return this.form.billLines.forEach(s=>{e+=Number(s.total)}),this.form.billTotalAmount=e,e},onSave:function(){p.post(route("bills.purchase.store"),this.form).then(e=>{this.processing=!1,this.$nextTick(()=>this.$emit("dataUpdated")),this.form.reset(),this.form.processing=!1}).catch(e=>{this.form.processing=!1,this.$page.props.errors=e.response.data.errors})}},created:function(){p.get(route("clinic.all")).then(s=>{this.clinics=s.data}),p.get(route("items.index")).then(s=>{var w=s.data;this.items=w.filter(V=>V.storable==1)}),p.get("/json/UnitTypes.json").then(s=>{this.units=s.data}).catch(s=>{})}},z={class:"lg:py-2"},Q={class:"px-2 my-2 w-fit sm:px-6 lg:px-8"},G={class:"mx-auto sm:px-6 lg:px-8"},H={class:"bg-white shadow-xl sm:rounded-lg px-4 pb-4 pt-0"},K={class:"grid lg:grid-cols-2 gap-4 sm:grid-cols-1 h-1/2"},R={class:""},X={class:""},Y=["value"],Z={class:""},$=["value"],ee={class:""},te=["value"],oe={class:"result my-5 w-full"},se={class:"hidden md:block w-full"},ie={class:"w-full text-center bg-gray-300"},le={class:"bg-[#f8f9fa] p-1 border border-[#eceeef] w-3/12"},re=t("i",{class:"fa-solid fa-plus"},null,-1),ne=[re],ae={class:"bg-[#f8f9fa] p-1 border border-[#eceeef] w-3/12"},de={class:"bg-[#f8f9fa] p-1 border border-[#eceeef]"},me={class:"bg-[#f8f9fa] p-1 border border-[#eceeef]"},ue={class:"bg-[#f8f9fa] p-1 border border-[#eceeef]"},ce={class:"bg-[#f8f9fa] p-1 border border-[#eceeef]"},pe={class:"w-full text-center border border-[#eceeef]"},fe={class:"border border-[#eceeef]"},_e={class:"p-1 border border-[#eceeef]"},he={class:"p-1 border border-[#eceeef]"},be={class:"p-1 border border-[#eceeef]"},ge={class:"p-1 border border-[#eceeef]"},ve={class:"p-1 border border-[#eceeef]"},ye={class:"p-1 border border-[#eceeef]"},we={class:"flex items-center justify-end mt-4"},Ve={class:"capitalize py-2 text-gray-600 text-lg font-bold"},ke={class:"flex items-center justify-end mt-20"};function Te(e,s,w,V,l,u){const U=a("NewItemDialog"),D=a("jet-validation-errors"),_=a("TextField"),g=a("jet-label"),k=a("multiselect"),C=a("jet-danger-button"),T=a("jet-button"),j=a("jet-secondary-button"),I=a("app-layout");return d(),L(I,null,{default:f(()=>[r(U,{ref:"dlg1"},null,512),t("div",z,[t("p",Q,i(e.__("Add Items To Stock")),1),t("div",G,[r(D,{class:"mb-4"}),t("div",H,[t("div",K,[t("div",R,[r(_,{modelValue:l.form.date,"onUpdate:modelValue":s[0]||(s[0]=o=>l.form.date=o),itemType:"date",itemLabel:e.__("Date")},null,8,["modelValue","itemLabel"])]),t("div",X,[r(g,{value:e.__("Clinic")},null,8,["value"]),v(t("select",{"onUpdate:modelValue":s[1]||(s[1]=o=>l.form.clinic_id=o),class:"mt-1 w-full border-slate-300 rounded-md",onChange:s[2]||(s[2]=o=>u.getWarehouses(l.form.clinic_id))},[(d(!0),m(b,null,h(l.clinics,o=>(d(),m("option",{value:o.id,key:o.id},i(o.name),9,Y))),128))],544),[[y,l.form.clinic_id]])]),t("div",Z,[r(g,{value:e.__("Warehouses")},null,8,["value"]),v(t("select",{"onUpdate:modelValue":s[3]||(s[3]=o=>l.form.warehouse=o),class:"mt-1 w-full border-slate-300 rounded-md"},[(d(!0),m(b,null,h(l.warehouses,o=>(d(),m("option",{value:o,key:o.id},i(o.name),9,$))),128))],512),[[y,l.form.warehouse]])]),t("div",ee,[r(g,{value:e.__("Stock")},null,8,["value"]),v(t("select",{"onUpdate:modelValue":s[4]||(s[4]=o=>l.form.stock=o),class:"mt-1 w-full border-slate-300 rounded-md"},[(d(!0),m(b,null,h(l.form.warehouse.stocks,o=>(d(),m("option",{value:o,key:o.id},i(o.name),9,te))),128))],512),[[y,l.form.stock]])])]),t("div",null,[t("div",null,[t("div",oe,[t("table",se,[t("thead",ie,[t("th",le,[c(i(e.__("Item"))+" ",1),t("button",{onClick:s[5]||(s[5]=o=>u.addNewItemDialog()),class:"cursor-pointer ml-4"},ne)]),t("th",ae,i(e.__("Unit")),1),t("th",de,i(e.__("Unit Price")),1),t("th",me,i(e.__("Quantity")),1),t("th",ue,i(e.__("Total")),1),t("th",ce,i(e.__("Action")),1)]),t("tbody",pe,[(d(!0),m(b,null,h(l.form.billLines,(o,S)=>(d(),m("tr",fe,[t("td",_e,[r(k,{modelValue:o.item,"onUpdate:modelValue":n=>o.item=n,label:"name",options:l.items,placeholder:"Select Item",searchable:!0},null,8,["modelValue","onUpdate:modelValue","options"])]),t("td",he,[r(k,{modelValue:o.unit,"onUpdate:modelValue":n=>o.unit=n,options:l.units,label:"desc_en",placeholder:"unit",searchable:!0},null,8,["modelValue","onUpdate:modelValue","options"])]),t("td",be,[r(_,{modelValue:o.unitPrice,"onUpdate:modelValue":n=>o.unitPrice=n,itemType:"number"},null,8,["modelValue","onUpdate:modelValue"])]),t("td",ge,[r(_,{modelValue:o.quantity,"onUpdate:modelValue":n=>o.quantity=n,itemType:"number"},null,8,["modelValue","onUpdate:modelValue"])]),t("td",ve,[r(_,{modelValue:o.total,"onUpdate:modelValue":n=>o.total=n,itemType:"number"},null,8,["modelValue","onUpdate:modelValue"])]),t("td",ye,[r(C,{class:"ms-2",onClick:n=>u.deleteLine(S)},{default:f(()=>[c(i(e.__("Delete")),1)]),_:2},1032,["onClick"])])]))),256))])])]),t("div",we,[r(T,{class:"ms-2 hidden md:inline-block",onClick:s[6]||(s[6]=o=>u.AddItem())},{default:f(()=>[c(i(e.__("Add")),1)]),_:1})]),t("h3",Ve,[c(i(e.__("Invoice Total")+" :")+" ",1),t("span",null,i(u.totalAmount()),1)])]),t("div",ke,[r(j,{onClick:s[7]||(s[7]=o=>u.onCancel())},{default:f(()=>[c(i(e.__("Cancel")),1)]),_:1}),r(T,{class:"ms-2",onClick:s[8]||(s[8]=o=>u.onSave())},{default:f(()=>[c(i(e.__("Save")),1)]),_:1})])])])])])]),_:1})}const Ct=W(O,[["render",Te]]);export{Ct as default};
