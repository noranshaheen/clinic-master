import{J as S}from"./ActionMessage-61e2ac70.js";import{J as k}from"./ActionSection-b2837b81.js";import{J as N}from"./Button-4bcf952d.js";import{J as j}from"./ConfirmationModal-25a9f4bd.js";import{J as I}from"./DangerButton-8bc4ac7b.js";import{J as U}from"./DialogModal-abac778c.js";import{J as D}from"./FormSection-88b4b82e.js";import{J as B}from"./Input-1c19b971.js";import{J as E}from"./Checkbox-4a56b901.js";import{J as F}from"./InputError-a5d97e62.js";import{J as M}from"./Label-df30c280.js";import{J as T}from"./SecondaryButton-713ac718.js";import{J as q}from"./SectionBorder-e50f0f2f.js";import{J as A}from"./ValidationErrors-d148bef4.js";import{k as g,c as G,w as f,r as u,o as c,f as h,t as a,b as r,a as i,i as v,C as _,d as p,g as b,F as y,h as L,n as P}from"./app-150d5054.js";import{_ as K}from"./_plugin-vue_export-helper-c27b6911.js";import"./SectionTitle-3e354ea0.js";import"./Modal-af9a88ec.js";/* empty css            */const R={components:{JetActionMessage:S,JetActionSection:k,JetButton:N,JetConfirmationModal:j,JetDangerButton:I,JetDialogModal:U,JetFormSection:D,JetInput:B,JetCheckbox:E,JetInputError:F,JetLabel:M,JetSecondaryButton:T,JetSectionBorder:q,JetValidationErrors:A},props:{customer:{Type:Object,default:null}},data(){return{errors:[],countries:[{name:"Egypt",code:"EG"},{name:"United States",code:"US"},{name:"United Kingdom",code:"UK"}],states:[],allStates:[],form:this.$inertia.form({name:"",receiver_id:"",type:"B",code:"",address:{customerID:"",country:"EG",governate:"",regionCity:"",street:"",buildingNumber:"",postalCode:"",additionalInformation:""}}),showDialog:!1}},methods:{ShowDialog(){this.customer!==null&&(this.form.name=this.customer.name,this.form.receiver_id=this.customer.receiver_id,this.form.type=this.customer.type,this.form.code=this.customer.code,this.form.address.customerID=this.customer.address.customerID,this.form.address.country=this.customer.address.country,this.allStates.find(o=>{o.countryShortCode==this.form.address.country&&(this.states=o.regions)}),this.form.address.governate=this.customer.address.governate,this.form.address.regionCity=this.customer.address.regionCity,this.form.address.street=this.customer.address.street,this.form.address.buildingNumber=this.customer.address.buildingNumber,this.form.address.postalCode=this.customer.address.postalCode,this.form.address.additionalInformation=this.customer.address.additionalInformation),this.showDialog=!0},CancelAddcustomer(){this.showDialog=!1},SaveCustomer(){g.put(route("customers.update",{customer:this.customer.Id}),this.form).then(o=>{this.$store.dispatch("setSuccessFlashMessage",!0),this.showDialog=!1,setTimeout(()=>{window.location.reload()},500)}).catch(o=>{console.log(o),this.form.processing=!1,this.$page.props.errors=o.response.data.errors,this.errors=o.response.data.errors})},SaveNewCustomer(){g.post(route("customers.store"),this.form).then(o=>{this.$store.dispatch("setSuccessFlashMessage",!0),this.processing=!1,this.$nextTick(()=>this.$emit("dataUpdated")),this.form.reset(),this.form.processing=!1,this.showDialog=!1,setTimeout(()=>{window.location.reload()},500)}).catch(o=>{this.form.processing=!1,this.$page.props.errors=o.response.data.errors,this.errors=o.response.data.errors})},submit(){this.customer==null?this.SaveNewCustomer():this.SaveCustomer()},onCountryChange(o){alert(o.target.value),this.allStates.find(e=>{e.countryShortCode==o.target.value&&(this.states=e.regions)}),console.log(this.states)}},created:function(){g.get("/json/Countries.json").then(e=>{this.countries=e.data.map(d=>({name:d.countryName,code:d.countryShortCode})),this.allStates=e.data,this.allStates.find(d=>{d.countryShortCode==this.form.address.country&&(this.states=d.regions)})}).catch(e=>{})}},z={class:"grid grid-cols-2 gap-4"},O={value:"P"},H={value:"B"},Q={value:"F"},W={class:"mt-4"},X={class:"mt-4"},Y={class:"mt-4"},Z={class:"mt-4"},x={class:"mt-4"},$=["value"],ee={class:"mt-4"},oe=["value"],se={class:"mt-4"},te={class:"mt-4"},re={class:"mt-4"},ie={class:"flex items-center justify-end"};function le(o,e,d,ne,t,m){const C=u("jet-validation-errors"),l=u("jet-label"),n=u("jet-input"),w=u("jet-secondary-button"),V=u("jet-button"),J=u("jet-dialog-modal");return c(),G(J,{show:t.showDialog,onClose:e[14]||(e[14]=s=>t.showDialog=!1)},{title:f(()=>[h(a(o.__("Customer Information")),1)]),content:f(()=>[r(C,{class:"mb-4"}),i("form",{onSubmit:e[12]||(e[12]=L((...s)=>m.submit&&m.submit(...s),["prevent"]))},[i("div",z,[i("div",null,[i("div",null,[r(l,{for:"type",value:o.__("Customer Type")},null,8,["value"]),v(i("select",{id:"type","onUpdate:modelValue":e[0]||(e[0]=s=>t.form.type=s),class:"mt-1 block w-full rounded border border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 shadow-sm"},[i("option",O,a(o.__("Person")),1),i("option",H,a(o.__("Business")),1),i("option",Q,a(o.__("Foreign Customer")),1)],512),[[_,t.form.type]])]),i("div",W,[r(l,{for:"id",value:o.__("Tax Registration Number")},null,8,["value"]),r(n,{id:"id",type:"number",class:"mt-1 block w-full",modelValue:t.form.receiver_id,"onUpdate:modelValue":e[1]||(e[1]=s=>t.form.receiver_id=s),required:""},null,8,["modelValue"])]),i("div",X,[r(l,{for:"name",value:o.__("Customer Name")},null,8,["value"]),r(n,{id:"name",type:"text",class:"mt-1 block w-full",modelValue:t.form.name,"onUpdate:modelValue":e[2]||(e[2]=s=>t.form.name=s),required:""},null,8,["modelValue"])]),i("div",Y,[r(l,{for:"customerNo",value:o.__("Internal Code")},null,8,["value"]),r(n,{id:"customerNo",type:"text",class:"mt-1 block w-full",modelValue:t.form.code,"onUpdate:modelValue":e[3]||(e[3]=s=>t.form.code=s),required:"",autofocus:""},null,8,["modelValue"])]),i("div",Z,[r(l,{for:"additionalInformation",value:o.__("Additional Information (Location)")},null,8,["value"]),r(n,{id:"additionalInformation",type:"text",class:"mt-1 block w-full",modelValue:t.form.address.additionalInformation,"onUpdate:modelValue":e[4]||(e[4]=s=>t.form.address.additionalInformation=s)},null,8,["modelValue"])]),i("div",x,[r(l,{for:"postalCode",value:o.__("Postal Code")},null,8,["value"]),r(n,{id:"postalCode",type:"number",class:"mt-1 block w-full",modelValue:t.form.address.postalCode,"onUpdate:modelValue":e[5]||(e[5]=s=>t.form.address.postalCode=s)},null,8,["modelValue"])])]),i("div",null,[i("div",null,[r(l,{value:o.__("Country")},null,8,["value"]),v(i("select",{id:"country","onUpdate:modelValue":e[6]||(e[6]=s=>t.form.address.country=s),class:"mt-1 block w-full rounded border border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 shadow-sm",onChange:e[7]||(e[7]=s=>m.onCountryChange(s))},[(c(!0),p(y,null,b(t.countries,s=>(c(),p("option",{value:s.code},a(o.__(s.name)),9,$))),256))],544),[[_,t.form.address.country]])]),i("div",ee,[r(l,{for:"governate",value:o.__("Governate/State")},null,8,["value"]),v(i("select",{id:"governate","onUpdate:modelValue":e[8]||(e[8]=s=>t.form.address.governate=s),class:"mt-1 block w-full rounded border border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 shadow-sm"},[(c(!0),p(y,null,b(t.states,s=>(c(),p("option",{value:s.name},a(o.__(s.name)),9,oe))),256))],512),[[_,t.form.address.governate]])]),i("div",se,[r(l,{for:"regionCity",value:o.__("Region/City")},null,8,["value"]),r(n,{id:"regionCity",type:"text",class:"mt-1 block w-full",modelValue:t.form.address.regionCity,"onUpdate:modelValue":e[9]||(e[9]=s=>t.form.address.regionCity=s),required:""},null,8,["modelValue"])]),i("div",te,[r(l,{for:"street",value:o.__("Street")},null,8,["value"]),r(n,{id:"street",type:"text",class:"mt-1 block w-full",modelValue:t.form.address.street,"onUpdate:modelValue":e[10]||(e[10]=s=>t.form.address.street=s),required:""},null,8,["modelValue"])]),i("div",re,[r(l,{for:"buildingNumber",value:o.__("Building Number")},null,8,["value"]),r(n,{id:"buildingNumber",type:"text",class:"mt-1 block w-full",modelValue:t.form.address.buildingNumber,"onUpdate:modelValue":e[11]||(e[11]=s=>t.form.address.buildingNumber=s),required:""},null,8,["modelValue"])])])])],32)]),footer:f(()=>[i("div",ie,[r(w,{onClick:e[13]||(e[13]=s=>m.CancelAddcustomer())},{default:f(()=>[h(a(o.__("Cancel")),1)]),_:1}),r(V,{class:P(["ms-2",{"opacity-25":t.form.processing}]),onClick:m.submit,disabled:t.form.processing},{default:f(()=>[h(a(o.__("Save")),1)]),_:1},8,["onClick","class","disabled"])])]),_:1},8,["show"])}const Ne=K(R,[["render",le]]);export{Ne as default};
