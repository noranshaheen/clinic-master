import{A as S}from"./AppLayout-b94f7417.js";import{J as L}from"./Label-e291ccc6.js";import{J as B}from"./Button-11813b5e.js";import{J as V}from"./SecondaryButton-8a1eaf86.js";import{J as w}from"./DangerButton-367e534b.js";import{T as I}from"./TextField-f89d8302.js";import{M as E}from"./vue3-multiselect.umd.min-939aa207.js";import C from"./EditLine-d8888d4a.js";import{k as _,c as T,w as b,r as p,o as n,a as t,b as c,f as h,t as o,d as i,F as g,g as v,e as f}from"./app-010fad37.js";import"./sweetalert.min-679d9ee2.js";/* empty css                                                                  */import{_ as N}from"./_plugin-vue_export-helper-c27b6911.js";import"./Edit-74f06fe7.js";import"./ActionMessage-517545cc.js";import"./ActionSection-2c866042.js";import"./SectionTitle-8abeab5a.js";import"./ConfirmationModal-0f300aca.js";import"./Modal-97755a3c.js";import"./DialogModal-22356253.js";import"./FormSection-bd296fee.js";import"./Input-8a286b7b.js";import"./Checkbox-ebdeef89.js";import"./InputError-317c03cf.js";import"./SectionBorder-822e764c.js";import"./ValidationErrors-31471297.js";/* empty css            */import"./Edit-a73070bb.js";import"./Edit-7abb2ae3.js";import"./Edit-18d907dc.js";import"./Edit-16ea2851.js";import"./Edit-b486f9ab.js";import"./Edit-ec7eaf71.js";import"./Edit-b040ada8.js";import"./Edit-f6f19305.js";import"./Edit-67e94b24.js";import"./Edit-a5179c0a.js";import"./Load-dcf8a148.js";import"./Load-b22526f9.js";import"./Edit-dd846932.js";import"./Upload-b17b92a3.js";import"./Upload-4dcf9d8b.js";import"./Upload-12291f8c.js";import"./Upload-1ea272cb.js";import"./Settings-f203d5a5.js";import"./Settings-3720bcf6.js";import"./Upload-3f1630e8.js";import"./Request-86128435.js";import"./Add-dd2dde44.js";import"./Load-a5c84528.js";import"./Upload-484af51f.js";import"./Load-6372f5e6.js";import"./ItemsMap-0f9ec3d1.js";import"./Upload-cd794d3e.js";import"./ItemsMap-5b7489db.js";import"./RequestEx-322cc660.js";const A={components:{AppLayout:S,JetLabel:L,JetButton:B,JetSecondaryButton:V,JetDangerButton:w,DialogInvoiceLine:C,TextField:I,Multiselect:E},props:{},data(){return{tab_idx:1,clinics:[],doctors:[],expenses:[],incomes:[],items:[],mateched_clinics:[],form:{clinic:"",doctor:"",startDate:new Date().toISOString().slice(0,10),endDate:new Date().toISOString().slice(0,10)}}},methods:{onSearchExpenses:function(){_.post(route("bills.expenses.searchData"),this.form).then(e=>{this.incomes=[],this.items=[],this.expenses=e.data,console.log(e.data)}).catch(e=>{})},onSearchIncomes:function(){_.post(route("bills.income.searchData"),this.form).then(e=>{this.expenses=[],this.items=[],this.incomes=e.data,console.log(e.data)}).catch(e=>{})},onCheckBalance:function(){_.post(route("bills.items.balance"),this.form).then(e=>{this.expenses=[],this.incomes=[],this.items=e.data,console.log(e.data)})},getTotalLineIncome(e){if(e.appointment.payment!==null){var d=Number(e.appointment.payment.detection_fees);return e.prescription_items.forEach(a=>{a.service_fees!==null&&(d+=Number(a.service_fees))}),d}else return"0"},totalIncomes(){if(this.incomes.length>0){var e=0;return this.incomes.forEach(d=>{e+=Number(this.getTotalLineIncome(d))}),e}},totalExpenses(){if(this.expenses.length>0){var e=0;return this.expenses.forEach(d=>{e+=Number(d.totalAmount)}),e}},beginBalance(e){if(e.bill_details.length>0){var d=[];e.bill_details.forEach(m=>{var r=new Date(m.date).toLocaleDateString(),l=new Date(this.form.startDate).toLocaleDateString();r<=l&&d.push(m)}),console.log("temp1",d)}if(e.spendings.length>0){var a=[];e.spendings.forEach(m=>{var r=new Date(m.date_isseud).toLocaleDateString(),l=new Date(this.form.startDate).toLocaleDateString();r<=l&&a.push(m)}),console.log("temp2",a)}}},created:function(){_.get(route("doctor.all")).then(d=>{var a={id:-1,name:"All"};this.doctors=d.data,this.doctors.unshift(a)}),_.get(route("clinic.all")).then(d=>{var a={id:-1,name:"All"};this.clinics=d.data,this.clinics.unshift(a)})}},J={class:"py-4"},F={class:"mx-auto sm:px-6 lg:px-8"},j={class:"bg-white shadow-xl sm:rounded-lg px-4 pb-4 pt-4"},U={class:"grid lg:grid-cols-2 gap-4 sm:grid-cols-1 h-1/2 overflow"},M={class:"flex items-center justify-start mt-4"},O={class:"mx-auto sm:px-6 lg:px-8"},P={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},Q={key:0,class:"result my-5 overflow-x-auto w-full"},R={class:"w-11/12 mx-auto max-w-4xl lg:max-w-full"},W={class:"text-center bg-gray-300"},q={class:"bg-[#f8f9fa] p-3 border border-[#d4d4d4]"},z={class:"bg-[#f8f9fa] p-3 border border-[#d4d4d4]"},G={class:"bg-[#f8f9fa] p-3 border border-[#d4d4d4]"},H={class:"bg-[#f8f9fa] p-3 border border-[#d4d4d4]"},K={class:"bg-[#f8f9fa] p-3 border border-[#d4d4d4]"},X={class:"text-center border border-[#d4d4d4]"},Y={class:"p-2 border border-[#d4d4d4]"},Z={class:"p-2 border border-[#d4d4d4]"},$={class:"p-2 border border-[#d4d4d4]"},ee={class:"p-2 border border-[#d4d4d4]"},te={class:"p-2 border border-[#d4d4d4]"},oe={class:"border border-[#d4d4d4]"},se={class:"p-2 border font-bold border-[#d4d4d4]",colspan:"4"},de={class:"p-2 border font-bold border-[#d4d4d4]"},re={key:1,class:"result my-5 overflow-x-auto w-full"},ne={class:"w-11/12 mx-auto max-w-4xl lg:max-w-full"},ie={class:"text-center bg-gray-300"},le={class:"bg-[#f8f9fa] border border-[#d4d4d4]"},ae={class:"bg-[#f8f9fa] p-3 border border-[#d4d4d4]"},ce={class:"bg-[#f8f9fa] p-3 border border-[#d4d4d4]"},me={class:"bg-[#f8f9fa] p-3 border border-[#d4d4d4]"},_e={class:"bg-[#f8f9fa] p-3 border border-[#d4d4d4]"},pe={class:"text-center border border-[#d4d4d4]"},be={class:"border border-[#d4d4d4]"},he={class:"p-2 border border-[#d4d4d4]"},fe={class:"border border-[#d4d4d4]"},ue={class:"border border-[#d4d4d4]"},ge={class:"p-2 border border-[#d4d4d4]"},ve={class:"p-2 border font-bold border-[#d4d4d4]",colspan:"4"},De={class:"p-2 border font-bold border-[#d4d4d4]"},xe={key:2,class:"result my-5 overflow-x-auto w-full"},ye={class:"w-11/12 mx-auto max-w-4xl lg:max-w-full"},ke={class:"text-center bg-gray-300"},Se={class:"bg-[#f8f9fa] p-3 border border-[#d4d4d4]"},Le={class:"bg-[#f8f9fa] p-3 border border-[#d4d4d4]"},Be={class:"bg-[#f8f9fa] p-3 border border-[#d4d4d4]"},Ve={class:"bg-[#f8f9fa] p-3 border border-[#d4d4d4]"},we={class:"text-center border border-[#d4d4d4]"},Ie={key:0,class:"border border-[#d4d4d4]"},Ee={key:1,class:"p-2 border border-[#d4d4d4]"},Ce={key:2,class:"border border-[#d4d4d4]"},Te={key:3,class:"border border-[#d4d4d4]"},Ne={key:3},Ae={class:"text-center text-red-600 my-5"},Je=t("i",{class:"fa fa-exclamation-circle mr-1"},null,-1);function Fe(e,d,a,m,r,l){const D=p("jet-label"),x=p("multiselect"),y=p("TextField"),u=p("jet-button"),k=p("app-layout");return n(),T(k,null,{default:b(()=>[t("div",J,[t("div",F,[t("div",j,[t("div",U,[t("div",null,[c(D,{value:e.__("Clinic")},null,8,["value"]),c(x,{modelValue:r.form.clinic,"onUpdate:modelValue":d[0]||(d[0]=s=>r.form.clinic=s),label:"name",options:r.clinics,placeholder:"Select branch"},null,8,["modelValue","options"])]),t("div",null,[c(D,{value:e.__("Doctor")},null,8,["value"]),c(x,{modelValue:r.form.doctor,"onUpdate:modelValue":d[1]||(d[1]=s=>r.form.doctor=s),label:"name",options:r.doctors,placeholder:"Select customer"},null,8,["modelValue","options"])]),c(y,{modelValue:r.form.startDate,"onUpdate:modelValue":d[2]||(d[2]=s=>r.form.startDate=s),itemType:"date",itemLabel:e.__("Start Date")},null,8,["modelValue","itemLabel"]),c(y,{modelValue:r.form.endDate,"onUpdate:modelValue":d[3]||(d[3]=s=>r.form.endDate=s),itemType:"date",itemLabel:e.__("End Date")},null,8,["modelValue","itemLabel"])]),t("div",M,[c(u,{onClick:d[4]||(d[4]=s=>l.onSearchExpenses())},{default:b(()=>[h(o(e.__("Expenses")),1)]),_:1}),c(u,{onClick:d[5]||(d[5]=s=>l.onSearchIncomes())},{default:b(()=>[h(o(e.__("Incomes")),1)]),_:1}),c(u,{onClick:d[6]||(d[6]=s=>l.onCheckBalance())},{default:b(()=>[h(o(e.__("Consumable Items Balance")),1)]),_:1})])])])]),t("div",O,[t("div",P,[r.expenses.length>0?(n(),i("div",Q,[t("table",R,[t("thead",W,[t("th",q,o(e.__("Bill Number")),1),t("th",z,o(e.__("Date")),1),t("th",G,o(e.__("Clinic")),1),t("th",H,o(e.__("Doctor")),1),t("th",K,o(e.__("Expenses Amount")),1)]),t("tbody",X,[(n(!0),i(g,null,v(r.expenses,(s,je)=>(n(),i("tr",{class:"border border-[#d4d4d4]",key:s.id},[t("td",Y,o(s.id),1),t("td",Z,o(new Date(s.date).toLocaleDateString()),1),t("td",$,o(s.clinic.name),1),t("td",ee,o(s.doctor.name),1),t("td",te,o(s.totalAmount),1)]))),128)),t("tr",oe,[t("td",se,o(e.__("Total")),1),t("td",de,o(l.totalExpenses()),1)])])])])):r.incomes.length>0?(n(),i("div",re,[t("table",ne,[t("thead",ie,[t("th",le,o(e.__("Prescription Number")),1),t("th",ae,o(e.__("Date")),1),t("th",ce,o(e.__("Clinic")),1),t("th",me,o(e.__("Doctor")),1),t("th",_e,o(e.__("Incomes Amount")),1)]),t("tbody",pe,[(n(!0),i(g,null,v(r.incomes,s=>(n(),i("tr",{class:"border border-[#d4d4d4]",key:s.id},[t("td",be,o(s.id),1),t("td",he,o(new Date(s.dateTimeIssued).toLocaleDateString()),1),t("td",fe,o(s.clinic.name),1),t("td",ue,o(s.doctor.name),1),t("td",ge,o(l.getTotalLineIncome(s)),1)]))),128)),t("tr",null,[t("td",ve,o(e.__("Total")),1),t("td",De,o(l.totalIncomes()),1)])])])])):r.items.length>0?(n(),i("div",xe,[t("table",ye,[t("thead",ke,[t("th",Se,o(e.__("Item")),1),t("th",Le,o(e.__("Beginning Balance")),1),t("th",Be,o(e.__("Ending Balance")),1),t("th",Ve,o(e.__("Consumed Quantity")),1)]),t("tbody",we,[(n(!0),i(g,null,v(r.items,s=>(n(),i("tr",{class:"border border-[#d4d4d4]",key:s.id},[s.hidden==0?(n(),i("td",Ie,o(s.name),1)):f("",!0),s.hidden==0?(n(),i("td",Ee,o(l.beginBalance(s)),1)):f("",!0),s.hidden==0?(n(),i("td",Ce,o("-")+" ")):f("",!0),s.hidden==0?(n(),i("td",Te,o("-")+" ")):f("",!0)]))),128))])])])):(n(),i("div",Ne,[t("p",Ae,[Je,h(" "+o(e.__("No Records Were Found")),1)])]))])])]),_:1})}const Mt=N(A,[["render",Fe]]);export{Mt as default};
