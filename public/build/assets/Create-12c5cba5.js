import{k as p,c as J,w as c,r as n,o as a,b as r,a as s,t as l,i as g,C as v,d as m,g as _,F as h,f as u}from"./app-98cccb0d.js";import{A as N}from"./AppLayout-336b7499.js";import{J as T}from"./Label-c6c7e0c2.js";import{J as U}from"./Button-fce1e67a.js";import{J as A}from"./SecondaryButton-fb7ef34d.js";import{J as B}from"./DangerButton-bf3f8f1f.js";import{T as F}from"./TextField-4dc08153.js";import{M as q}from"./vue3-multiselect.umd.min-89fe1e95.js";import E from"./EditLine-64c486c6.js";import W from"./Edit-470aa9e5.js";import{J as M}from"./ValidationErrors-ce3c07bd.js";/* empty css                                                                  */import{_ as O}from"./_plugin-vue_export-helper-c27b6911.js";/* empty css            */import"./Edit-7ca2eef9.js";import"./ActionMessage-529841b6.js";import"./ActionSection-14bbef3c.js";import"./SectionTitle-f26ec90c.js";import"./ConfirmationModal-2d2586d4.js";import"./Modal-2ccc6cf7.js";import"./DialogModal-9cb7d35f.js";import"./FormSection-60b88c5f.js";import"./Input-9c9fd5b2.js";import"./Checkbox-7ff4e1d6.js";import"./InputError-48880b4d.js";import"./SectionBorder-a45d0249.js";import"./Edit-cfad98b4.js";import"./Edit-04381c68.js";import"./Edit-c883850a.js";import"./Edit-663be45d.js";import"./Edit-833659c9.js";import"./Edit-e905c401.js";import"./Edit-fb9e1a40.js";import"./Edit-8b049cff.js";import"./Edit-7210d6e2.js";import"./Edit-9520adfe.js";import"./Load-c81154ca.js";import"./Load-269b27e0.js";import"./Edit-ae0efa3b.js";import"./Upload-3f7847e9.js";import"./Upload-cab6aca1.js";import"./Upload-4bb109cf.js";import"./Upload-91640e3b.js";import"./Settings-281c0c2c.js";import"./Settings-3a181d36.js";import"./Upload-b3182070.js";import"./Request-264efc19.js";import"./Add-983c5f77.js";import"./Load-b9d12279.js";import"./Upload-0c9409a0.js";import"./Load-c588859c.js";import"./sweetalert.min-9f604034.js";import"./ItemsMap-ac429fa2.js";import"./Upload-69a7afe4.js";import"./ItemsMap-99c5c9fb.js";import"./RequestEx-4f93fb5e.js";const P={components:{AppLayout:N,NewItemDialog:W,JetLabel:T,JetButton:U,JetSecondaryButton:A,JetDangerButton:B,DialogInvoiceLine:E,TextField:F,Multiselect:q,JetValidationErrors:M},props:{},data(){return{item:"",idx:"",warehouses:[],stocks:[],clinics:[],items:[],units:[],errors:[],form:this.$inertia.form({billLines:[],clinic_id:"",warehouse:"",stock:"",date:""})}},methods:{getWarehouses(e){p.get(route("inventory.all",e)).then(t=>{this.warehouses=t.data})},AddItem:function(){this.form.billLines.push({item:"",quantity:0})},addNewItemDialog(){this.$refs.dlg1.ShowDialog()},addNewILineDialog(){this.$nextTick(()=>{this.$refs.dlg2.ShowDialog()})},editLineDialog(e){this.item=JSON.parse(JSON.stringify(this.form.billLines[e])),this.idx=e,this.$nextTick(()=>{this.$refs.dlg3.ShowDialog()})},onAddLine(e){this.form.billLines.push({item:e.item,unit:e.unit,unitPrice:e.unitPrice,quantity:e.quantity,total:e.total})},onEditLine(e,t){this.form.billLines[t]=e,console.log(this.form.billLines)},deleteLine:function(e){this.form.billLines.splice(e,1)},onCancel:function(){window.location.reload()},totalAmount(){var e=0;if(this.form.billLines.length!=0)return this.form.billLines.forEach(t=>{e+=Number(t.total)}),this.form.billTotalAmount=e,e},onSave:function(){p.post(route("inventory.store.outs"),this.form).then(e=>{this.processing=!1,this.$nextTick(()=>this.$emit("dataUpdated")),this.form.reset(),this.form.processing=!1}).catch(e=>{this.form.processing=!1,this.$page.props.errors=e.response.data.errors,this.errors=e.response.data.errors})}},created:function(){p.get(route("clinic.all")).then(t=>{this.clinics=t.data}),p.get(route("items.index")).then(t=>{var w=t.data;this.items=w.filter(y=>y.storable==1)}),p.get("/json/UnitTypes.json").then(t=>{this.units=t.data}).catch(t=>{})}},Q={class:"lg:py-2"},z={class:"px-2 my-2 w-fit sm:px-6 lg:px-8"},G={class:"mx-auto sm:px-6 lg:px-8"},H={class:"bg-white shadow-xl sm:rounded-lg px-4 pb-4 pt-0"},K={class:"grid lg:grid-cols-2 gap-4 sm:grid-cols-1 h-1/2"},R={class:""},X={class:""},Y=["value"],Z={class:""},$=["value"],ee={class:""},te=["value"],oe={class:"w-1/2"},se={class:"result my-5 px-1 w-full"},ie={class:"w-full"},re={class:"w-full text-center bg-gray-300"},le={class:"bg-[#f8f9fa] p-1 border border-[#eceeef] w-6/12"},ne=s("i",{class:"fa-solid fa-plus"},null,-1),ae=[ne],me={class:"bg-[#f8f9fa] p-1 border border-[#eceeef]"},de={class:"bg-[#f8f9fa] p-1 border border-[#eceeef]"},pe={class:"w-full text-center border border-[#eceeef]"},ce={class:"border border-[#eceeef]"},ue={class:"p-1 border border-[#eceeef]"},fe={class:"p-1 border border-[#eceeef]"},_e={class:"p-1 border border-[#eceeef]"},he={class:"flex items-center justify-start mt-4"},be={class:"flex items-center justify-end mt-20"};function ge(e,t,w,y,i,d){const L=n("NewItemDialog"),V=n("jet-validation-errors"),k=n("TextField"),b=n("jet-label"),D=n("multiselect"),C=n("jet-danger-button"),x=n("jet-button"),j=n("jet-secondary-button"),S=n("app-layout");return a(),J(S,null,{default:c(()=>[r(L,{ref:"dlg1"},null,512),s("div",Q,[s("p",z,l(e.__("Withdraw Items From Stock")),1),s("div",G,[r(V,{class:"mb-4 sm:px-6 lg:px-8 text-xl"}),s("div",H,[s("div",K,[s("div",R,[r(k,{modelValue:i.form.date,"onUpdate:modelValue":t[0]||(t[0]=o=>i.form.date=o),itemType:"date",itemLabel:e.__("Date")},null,8,["modelValue","itemLabel"])]),s("div",X,[r(b,{value:e.__("Clinic")},null,8,["value"]),g(s("select",{"onUpdate:modelValue":t[1]||(t[1]=o=>i.form.clinic_id=o),class:"mt-1 w-full border-slate-300 rounded-md",onChange:t[2]||(t[2]=o=>d.getWarehouses(i.form.clinic_id))},[(a(!0),m(h,null,_(i.clinics,o=>(a(),m("option",{value:o.id,key:o.id},l(o.name),9,Y))),128))],544),[[v,i.form.clinic_id]])]),s("div",Z,[r(b,{value:e.__("Warehouses")},null,8,["value"]),g(s("select",{"onUpdate:modelValue":t[3]||(t[3]=o=>i.form.warehouse=o),class:"mt-1 w-full border-slate-300 rounded-md"},[(a(!0),m(h,null,_(i.warehouses,o=>(a(),m("option",{value:o,key:o.id},l(o.name),9,$))),128))],512),[[v,i.form.warehouse]])]),s("div",ee,[r(b,{value:e.__("Stock")},null,8,["value"]),g(s("select",{"onUpdate:modelValue":t[4]||(t[4]=o=>i.form.stock=o),class:"mt-1 w-full border-slate-300 rounded-md"},[(a(!0),m(h,null,_(i.form.warehouse.stocks,o=>(a(),m("option",{value:o,key:o.id},l(o.name),9,te))),128))],512),[[v,i.form.stock]])])]),s("div",null,[s("div",oe,[s("div",se,[s("table",ie,[s("thead",re,[s("th",le,[u(l(e.__("Item"))+" ",1),s("button",{onClick:t[5]||(t[5]=o=>d.addNewItemDialog()),class:"cursor-pointer ml-4"},ae)]),s("th",me,l(e.__("Quantity")),1),s("th",de,l(e.__("Action")),1)]),s("tbody",pe,[(a(!0),m(h,null,_(i.form.billLines,(o,I)=>(a(),m("tr",ce,[s("td",ue,[r(D,{modelValue:o.item,"onUpdate:modelValue":f=>o.item=f,label:"name",options:i.items,placeholder:"Select Item",searchable:!0},null,8,["modelValue","onUpdate:modelValue","options"])]),s("td",fe,[r(k,{modelValue:o.quantity,"onUpdate:modelValue":f=>o.quantity=f,itemType:"number"},null,8,["modelValue","onUpdate:modelValue"])]),s("td",_e,[r(C,{class:"ms-2",onClick:f=>d.deleteLine(I)},{default:c(()=>[u(l(e.__("Delete")),1)]),_:2},1032,["onClick"])])]))),256))])])]),s("div",he,[r(x,{class:"ms-2 hidden md:inline-block",onClick:t[6]||(t[6]=o=>d.AddItem())},{default:c(()=>[u(l(e.__("Add")),1)]),_:1})])]),s("div",be,[r(j,{onClick:t[7]||(t[7]=o=>d.onCancel())},{default:c(()=>[u(l(e.__("Cancel")),1)]),_:1}),r(x,{class:"ms-2",onClick:t[8]||(t[8]=o=>d.onSave())},{default:c(()=>[u(l(e.__("Save")),1)]),_:1})])])])])])]),_:1})}const yt=O(P,[["render",ge]]);export{yt as default};
